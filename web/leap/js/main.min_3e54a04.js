var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function s(e){try{l(r["throw"](e))}catch(t){a(t)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}l((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(i=l.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(r){n=[6,r],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,s,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},planetJump;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.colliderEnabled=!1,e}return __extends(n,t),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this);var e=this;e.img=e.getChild("img").asImage},Object.defineProperty(n.prototype,"colliderGraphics",{get:function(){var e=this;return e.colliderDisplay?e.colliderDisplay.graphics:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return new g2.Vector2(this.x,this.y)},enumerable:!0,configurable:!0}),n.prototype.init=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this;r.cfg=e.GameCfg.getCfg().Items[r.key],r.updateTransform()},n.prototype.onCollisionEnter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this;t instanceof e.Player&&o.applyEffect.apply(o,[t].concat(n)),t instanceof e.ExplodeSpike&&o.hitBySpike(),o.collisionEffect()},n.prototype.applyEffect=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this;e.isInvincible?(r.addScore(),utils.Singleton.get(utils.SoundMgr).playSound("black_explosion_mp3")):e.dead()},n.prototype.collisionEffect=function(){var t=this;e.World.instance.spawnUIAni(e.CollisionAni,t.x,t.y)},n.prototype.hitBySpike=function(){var e=this;e.addScore()},n.prototype.addScore=function(){var t=this,n=e.GameMgr.getInstance().addScore(t.cfg.score),r=e.World.instance.spawnUIAni(e.AddScoreAni,t.x,t.y);r.setScore(n)},n.prototype.onAddToStage=function(e){var t=this,n=t.scaleX;egret.Tween.get(t).set({scaleX:0,scaleY:0,alpha:0}).to({scaleX:n,scaleY:n,alpha:1},600,egret.Ease.sineInOut).call(function(){t.colliderEnabled=!0})},n.prototype.onMove=function(t){var n=this,r=e.GameCfg.getCfg().WorldRange;n.getHeightPow()>r*r&&e.ItemMgr.getInstance().destroyItem(n)},n.prototype.getHeight=function(){var e=this;return Math.sqrt(e.getHeightPow())},n.prototype.getHeightPow=function(){var e=this;return e.x*e.x+e.y*e.y},n.prototype.getAngle=function(){var e=this;return utils.getAngle(e.x,e.y)},n.prototype.onCreate=function(){var t=this;e.GameCfg.colliderDisplayCfg.display&&!t.colliderDisplay&&(t.colliderDisplay=new egret.Shape,t.displayListContainer.addChild(t.colliderDisplay)),t.isCollided=!1,t.colliderEnabled=!1,t.displayObject.once(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t)},n.prototype.onDestroy=function(){},n.prototype.onEnterFrame=function(e){var t=this;t.cfg.isProp||(t.onMove(e),t.updateTransform()),t.drawCollider()},n.prototype.initCollider=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},n.prototype.updateTransform=function(){var e=this;e.collider&&(e.collider.x=e.x,e.collider.y=e.y,e.collider.scaleX=e.scaleX,e.collider.scaleY=e.scaleY,e.rotation=e.getAngle()-270,e.collider.rotation=e.rotation)},n.prototype.drawCollider=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},n}(fairygui.GComponent);e.Item=t,__reflect(t.prototype,"planetJump.Item",["utils.IGameObject","g2.SAT.ICollider"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this);var e=this;e.initVertices(),e.initCollider(e.vertices)},n.prototype.initVertices=function(){},n.prototype.initCollider=function(e){var t=this;t.collider=new g2.SAT.Polygon(e)},n.prototype.drawCollider=function(){var t=this,n=e.GameCfg.colliderDisplayCfg;if(n.display&&t.collider&&t.colliderGraphics){t.colliderGraphics.clear();var r=t.isCollided?n.collidedColor:n.color;t.colliderGraphics.lineStyle(n.lineSize,r,n.alpha);var o=t.collider.originVertices;t.colliderGraphics.moveTo(o[0].x,o[0].y);for(var a=1,i=o.length;i>a;a++){var s=o[a];t.colliderGraphics.lineTo(s.x,s.y)}t.colliderGraphics.lineTo(o[0].x,o[0].y),t.colliderGraphics.endFill()}},n}(e.Item);e.PolygonItem=t,__reflect(t.prototype,"planetJump.PolygonItem")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(){function t(e){this.spawnInterval=1e3,this.timer=0,this.key=e}return t.prototype.onUpdate=function(){var e=this;e.timer+=33,e.timer>e.spawnInterval&&(e.spawn(),e.timer=0)},t.prototype.spawn=function(){var t=this,n=e.GameCfg.getLevelCfg(e.GameMgr.getInstance().level),r=Math.random()*Math.PI*2,o=n.propRange[0]+Math.random()*n.propRange[1],a=e.ItemMgr.getInstance().spawnItem(t.key,r,o,e.Prop.scaleUnit);e.World.instance.addItem(a.displayObject)},t.prototype.canSpawnProp=function(){var t=this,n=e.GameMgr.getInstance().level,r=e.GameCfg.getLevelCfg(n),o=e.ItemMgr.getInstance().getItemSpawnNum(t.key);return o>=r.propSpawnMax?!1:!0},t.prototype.canSpawnOb=function(){var t=this,n=e.GameMgr.getInstance().level,r=e.GameCfg.getCfg().Items[t.key];if(r.level&&r.level>n)return!1;var o=e.GameCfg.getLevelCfg(n),a=e.ItemMgr.getInstance().getItemSpawnNum(t.key);return a>=o.obSpawnMax?!1:!0},t}();e.ItemSpawner=t,__reflect(t.prototype,"planetJump.ItemSpawner",["planetJump.ISpawner"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this);var e=this;e.initRadius(),e.initCollider(e.radius)},n.prototype.initRadius=function(){var e=this;e.radius=25},n.prototype.initCollider=function(e){var t=this;t.collider=new g2.SAT.Circle(e)},n.prototype.drawCollider=function(){var t=this,n=e.GameCfg.colliderDisplayCfg;if(n.display&&t.collider&&t.colliderGraphics){t.colliderGraphics.clear();var r=t.isCollided?n.collidedColor:n.color;t.colliderGraphics.lineStyle(n.lineSize,r,n.alpha),t.colliderGraphics.drawCircle(0,0,t.collider.r),t.colliderGraphics.endFill()}},n}(e.Item);e.CircleItem=t,__reflect(t.prototype,"planetJump.CircleItem")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.rotateSpeed=0,e.rotateTime=0,e.curClockwise=!0,e}return __extends(n,t),n.prototype.init=function(e){t.prototype.init.call(this);var n=this;n.rotateSpeed=e,n.rotateTime=n.getAngle()/n.rotateSpeed},n.prototype.onMove=function(n){var r=this;if(t.prototype.onMove.call(this,n),e.GameMgr.getInstance().level>1){var o=r.getMoveClockwise();if(r.curClockwise!=o){var a=360/r.rotateSpeed;r.rotateTime=a-r.rotateTime%a}r.curClockwise=o;var i=e.RoundMotion.getPointByTime(r.rotateTime,r.rotateSpeed,r.getHeight(),r.getMoveClockwise());r.x=i.x,r.y=i.y,r.rotateTime++}},n.prototype.getMoveClockwise=function(){return e.GameMgr.getInstance().level%2==0},n.prototype.collisionEffect=function(){var t=this;e.World.instance.spawnUIAni(e.CollisionBlackAni,t.x,t.y)},n}(e.PolygonItem);e.CircleMotionSquare=t,__reflect(t.prototype,"planetJump.CircleMotionSquare")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype["do"]=function(e){this.step=e},n.prototype.complete=function(){var t=this,n="leap_guideStep"+t.step;egret.localStorage.setItem(n,"1"),e.GameMgr.getInstance().setPause(!1,!1),t.parent.visible=!1,t.parent.touchable=!1,t.removeFromParent(),3==t.step&&(e.GameMgr.getInstance().guideCompleted=!0,utils.EventDispatcher.getInstance().dispatchEvent("guideCompleted"))},n}(fairygui.GComponent);e.GuideUI=t,__reflect(t.prototype,"planetJump.GuideUI")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speedX=0,t.speedY=0,t}return __extends(t,e),t.prototype.onAddToStage=function(t){var n=this;e.prototype.onAddToStage.call(this,t),n.setSpeed(n.speed,n.x,n.y)},t.prototype.setSpeed=function(e,t,n){var r=this,o=Math.atan(n/t);r.speedX=e*Math.cos(o),r.speedX*=0>t?-1:1,r.speedY=e*Math.sin(o),r.speedY*=0>t?-1:1},t.prototype.init=function(t){e.prototype.init.call(this);var n=this;n.speed=parseFloat(t.toFixed(2))},t.prototype.onMove=function(t){var n=this;e.prototype.onMove.call(this,t);var r=n.x+n.speedX,o=n.y+n.speedY;n.x=parseFloat(r.toFixed(1)),n.y=parseFloat(o.toFixed(1))},t}(e.CircleItem);e.LinearMotionCircle=t,__reflect(t.prototype,"planetJump.LinearMotionCircle")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(t,n,r){void 0===t&&(t="leap");var o=e.call(this)||this;o.playPopSound=!1;var a=o;return a.playPopSound=r,a.registerComponents(),a.initUI(t,n),a.addEventListeners(),o}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this);var t=this;t.removeEventListeners(),utils.StageUtils.removeEventListener(egret.Event.RESIZE,t.setResolution,t)},t.prototype.initUI=function(e,t){var n=this;t&&""!=t||(t=egret.getQualifiedClassName(n),-1!=t.indexOf(".")&&(t=t.split(".")[1])),n.contentPane=fairygui.UIPackage.createObject(e,t).asCom},t.prototype.addEventListeners=function(){var e=this;utils.StageUtils.addEventListener(egret.Event.RESIZE,e.setResolution,e)},t.prototype.removeEventListeners=function(){var e=this;utils.StageUtils.removeEventListener(egret.Event.RESIZE,e.setResolution,e)},t.prototype.registerComponents=function(){},t.prototype.registerComponent=function(e,t,n){var r=fairygui.UIPackage.getItemURL(n,e);fairygui.UIObjectFactory.setPackageItemExtension(r,t)},t.prototype.onInit=function(){var e=this;e.width=egret.MainContext.instance.stage.stageWidth,e.height=egret.MainContext.instance.stage.stageHeight},t.prototype.doShowAnimation=function(){var e=this;e.playPopSound&&utils.Singleton.get(utils.SoundMgr).playSound("pop_mp3"),e.onShown()},t.prototype.onShown=function(){},t.prototype.setResolution=function(){var e=this;e.height=utils.StageUtils.stageHeight,e.width=utils.StageUtils.stageWidth},t}(fairygui.Window);e.BaseWindow=t,__reflect(t.prototype,"planetJump.BaseWindow")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speedX=0,t.speedY=0,t}return __extends(t,e),t.prototype.onAddToStage=function(t){var n=this;e.prototype.onAddToStage.call(this,t);var r=Math.atan(n.y/n.x);n.speedX=n.speed*Math.cos(r),n.speedX*=n.x<0?-1:1,n.speedX=parseFloat(n.speedX.toFixed(1)),n.speedY=n.speed*Math.sin(r),n.speedY*=n.x<0?-1:1,n.speedY=parseFloat(n.speedY.toFixed(1))},t.prototype.init=function(t){e.prototype.init.call(this);var n=this;n.speed=t},t.prototype.onMove=function(t){var n=this;e.prototype.onMove.call(this,t);var r=n.x+n.speedX,o=n.y+n.speedY;n.x=parseFloat(r.toFixed(1)),n.y=parseFloat(o.toFixed(1))},t}(e.PolygonItem);e.LinearMotionPolygon=t,__reflect(t.prototype,"planetJump.LinearMotionPolygon")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.rotateSpeed=0,e.rotateTime=0,e.curClockwise=!0,e}return __extends(n,t),n.prototype.init=function(e){t.prototype.init.call(this);var n=this;n.rotateSpeed=e,n.rotateTime=n.getAngle()/n.rotateSpeed},n.prototype.onMove=function(n){var r=this;if(t.prototype.onMove.call(this,n),e.GameMgr.getInstance().level>1){var o=r.getMoveClockwise();if(r.curClockwise!=o){var a=360/r.rotateSpeed;r.rotateTime=a-r.rotateTime%a}r.curClockwise=o;var i=e.RoundMotion.getPointByTime(r.rotateTime,r.rotateSpeed,r.getHeight(),r.getMoveClockwise());r.x=i.x,r.y=i.y,r.rotateTime++}},n.prototype.getMoveClockwise=function(){return e.GameMgr.getInstance().level%2==0},n.prototype.collisionEffect=function(){var t=this;e.World.instance.spawnUIAni(e.CollisionBlackAni,t.x,t.y)},n}(e.CircleItem);e.CircleMotionCircle=t,__reflect(t.prototype,"planetJump.CircleMotionCircle")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(){function t(){}return t.prototype.init=function(t,n){var r=this;r.effKey=t,r.player=n,r.cfg=e.GameCfg.getCfg().Items[t],r.timer=0,r.duration=r.cfg.duration},t.prototype.onUpdate=function(){},t.prototype.added=function(){var e=this;e.duration+=e.cfg.duration,e.cfg.invincibleTime&&e.player.addInvincibleTime(e.cfg.invincibleTime)},t.prototype.remove=function(){var e=this;e.player.removeEffect(e.effKey),utils.ObjectPool.getInstance().destroyObject(e)},t.prototype.onCreate=function(){},t.prototype.onDestroy=function(){},t.prototype.onEnterFrame=function(t){var n=this;return n.duration&&(n.timer+=e.GameCfg.frameTime,n.timer>=n.duration)?(n.timer=0,void n.remove()):void n.onUpdate()},t}();e.PropEffect=t,__reflect(t.prototype,"planetJump.PropEffect",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initVertices=function(){var e=this;e.vertices=[];var t=e.getChild("p0").asCom,n=e.getChild("p1").asCom,r=e.getChild("p2").asCom,o=e.getChild("p3").asCom;e.vertices.push(new g2.Vector2(t.x,t.y)),e.vertices.push(new g2.Vector2(n.x,n.y)),e.vertices.push(new g2.Vector2(r.x,r.y)),e.vertices.push(new g2.Vector2(o.x,o.y))},t}(e.CircleMotionSquare);e.ObSquare=t,__reflect(t.prototype,"planetJump.ObSquare")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onAddToStage=function(t){e.prototype.onAddToStage.call(this,t);var n=this;egret.Tween.removeTweens(n.img),egret.Tween.get(n.img,{loop:!0}).to({scaleX:1.1,scaleY:1.1},300).to({scaleX:.9,scaleY:.9},300).to({scaleX:1,scaleY:1},300)},t.prototype.applyEffect=function(e){var t=this;t.cfg.jumpSpeed&&e.jump(t.cfg.jumpSpeed)},t.scaleUnit=1,t}(e.CircleItem);e.Prop=t,__reflect(t.prototype,"planetJump.Prop")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(e){var n=t.call(this,e)||this;n.levelUpFlag=!1;var r=n;return utils.EventDispatcher.getInstance().addEventListener("levelUp",function(){r.levelUpFlag=!0},r),n}return __extends(n,t),n.prototype.spawn=function(){var t=this,n=e.GameCfg.getLevelCfg(e.GameMgr.getInstance().level);if(t.levelUpFlag){t.levelUpFlag=!1;var r=n.propSpawnInterval[0]+Math.random()*(n.propSpawnInterval[1]-n.propSpawnInterval[0]);t.spawnInterval=0|r}if(t.canSpawnProp()){var o=Math.random()*Math.PI*2,a=n.propRange[0]+Math.random()*(n.propRange[1]-n.propRange[0]);a|=0;var i=e.ItemMgr.getInstance().spawnItem(t.key,o,a,e.Prop.scaleUnit);i.init(),e.World.instance.addItem(i.displayObject)}},n}(e.ItemSpawner);e.PropSpawner=t,__reflect(t.prototype,"planetJump.PropSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.constructFromResource=function(){e.prototype.constructFromResource.call(this);var t=this;t.styleCtrl=t.getController("c1")},t.prototype.setColor=function(){var e=this;e.originWidth=e.width,e.width=10,e.styleCtrl.setSelectedIndex(1),egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!0}).to({scaleX:4},500).to({scaleX:1},500)},t.prototype.resetColor=function(){var e=this;egret.Tween.removeTweens(e),e.width=e.originWidth,egret.Tween.get(e).to({scaleX:1},500),e.styleCtrl.setSelectedIndex(0)},t}(fairygui.GComponent);e.LinkLine=t,__reflect(t.prototype,"planetJump.LinkLine")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var e=t.call(this)||this;e.soundOn=!0,e.hasShowNewRecord=!1;var n=e;return utils.StageUtils.addEventListener("createGame",n.onCreateGame,n),e}return __extends(n,t),n.prototype.onCreateGame=function(){var t=this;t.registerListener(),t.gameOverCtrl.setSelectedIndex(0),t.scoreTxt.setText(""),t.multTxt.text="x"+e.GameMgr.getInstance().multiNum,t.hasShowNewRecord=!1,t.soundOn=!utils.Singleton.get(utils.SoundMgr).isMuteSound,t.setSound()},n.prototype.registerListener=function(){var e=this;utils.EventDispatcher.getInstance().addEventListener("updateScore",e.updateScore,e),utils.EventDispatcher.getInstance().addEventListener("onAppPause",e.onPause,e),utils.EventDispatcher.getInstance().addEventListener("gameRevive",e.pause,e),utils.EventDispatcher.getInstance().addEventListener("newRound",e.onNewRound,e),utils.EventDispatcher.getInstance().addEventListener("levelUp",e.onLevelUp,e),utils.EventDispatcher.getInstance().addEventListener("gameOver",e.onGameOver,e),utils.EventDispatcher.getInstance().addEventListener("gameReviveOk",e.onGameReviveOk,e)},n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this);var e=this;e.pauseBtn=e.getChild("pauseBtn").asButton,e.pauseBtn.addClickListener(e.onPauseBtn,e),e.pausePanel=e.getChild("pausePanel").asCom,e.pausePanel.visible=!1,e.musicBtn=e.pausePanel.getChild("musicBtn").asButton,e.musicBtn.addClickListener(e.onMusicBtn,e),e.recordBtn=e.pausePanel.getChild("recordBtn").asButton,e.recordBtn.addClickListener(e.onRecordBtn,e),e.helpBtn=e.pausePanel.getChild("helpBtn").asButton,e.helpBtn.addClickListener(e.showHelpPanel,e),e.helpPanel=e.getChild("helpPanel").asCom,e.helpPanel.visible=!1,e.closeHelpBtn=e.helpPanel.getChild("closeBtn").asButton,e.closeHelpBtn.addClickListener(e.closeHelpPanel,e),e.continueBtn=e.pausePanel.getChild("continueBtn").asButton,e.continueBtn.addClickListener(e.onContinueBtn,e),e.gameOverCtrl=e.getController("gameOverCtrl"),e.scoreTxt=e.getChild("scoreTxt"),e.multTxt=e.getChild("multTxt").asCom,e.multTxt.alpha=0,e.levelTxt=e.getChild("levelTxt").asCom,e.levelTxt.alpha=0,e.newRecord=e.getChild("newRecord").asCom,e.newRecord.alpha=0},n.prototype.onPauseBtn=function(e){var t=this;t.pause()},n.prototype.onPause=function(){var t=this;e.GameMgr.getInstance().isPaused||e.GameMgr.getInstance().gameOver||t.pause()},n.prototype.pause=function(){var t=this;e.GameMgr.getInstance().setPause(!0),t.showPausePanel()},n.prototype.showPausePanel=function(){var t=this;t.pausePanel.visible=!0,t.recordBtn.selected=e.GameMgr.getInstance().openAutoRecordFlag,egret.Tween.removeTweens(t.pausePanel),egret.Tween.get(t.pausePanel).to({alpha:1},300,egret.Ease.sineInOut),utils.Singleton.get(e.AdMgr).showBannerAd("暂停界面banner")},n.prototype.closePausePanel=function(){var t=this;egret.Tween.removeTweens(t.pausePanel),egret.Tween.get(t.pausePanel).to({alpha:0},300,egret.Ease.sineInOut).call(function(){t.pausePanel.visible=!1}),utils.Singleton.get(e.AdMgr).hideBanner()},n.prototype.onMusicBtn=function(e){var t=this;t.soundOn=!t.soundOn,t.setSound()},n.prototype.setSound=function(){var e=this;utils.Singleton.get(utils.SoundMgr).setSoundMute(!e.soundOn),utils.Singleton.get(utils.SoundMgr).setBgmMute(!e.soundOn),e.musicBtn.getController("button").setSelectedIndex(e.soundOn?0:1)},n.prototype.onContinueBtn=function(t){var n=this;e.GameMgr.getInstance().setPause(!1),n.closePausePanel()},n.prototype.onNewRound=function(e){var t=this;1>=e||(egret.Tween.get(t.scoreTxt).to({alpha:0},200),t.multTxt.visible=!0,t.multTxt.getChild("txt").asTextField.text="x"+e,egret.Tween.removeTweens(t.multTxt),egret.Tween.get(t.multTxt).set({scaleX:0,scaleY:0,alpha:0}).to({scaleX:1.5,scaleY:1.5,alpha:1,rotation:20},250,egret.Ease.sineInOut).to({rotation:-20},300,egret.Ease.sineInOut).to({scaleX:1,scaleY:1,rotation:0},500,egret.Ease.sineInOut).call(function(){egret.Tween.get(t.scoreTxt).to({alpha:1},300)}).to({scaleX:0,scaleY:0,alpha:0},500,egret.Ease.sineInOut))},n.prototype.onLevelUp=function(e){var t=this;t.levelTxt.getChild("txt").asTextField.text=""+e,egret.Tween.get(t.levelTxt).set({alpha:0}).to({alpha:1,scaleX:1.5,scaleY:1.5},500,egret.Ease.sineInOut).wait(700).to({alpha:0,scaleX:1,scaleY:1},500,egret.Ease.sineInOut)},n.prototype.updateScore=function(t){var n=this;n.scoreTxt.setScore(t),!n.hasShowNewRecord&&t>e.GameMgr.getInstance().scoreRecord&&(n.newRecord.alpha=1,n.newRecord.getTransition("t0").play(function(){egret.Tween.get(n.newRecord).wait(1e3).to({alpha:0},1e3,egret.Ease.sineInOut)},n),n.hasShowNewRecord=!0,utils.Singleton.get(utils.SoundMgr).playSound("newHighScore_mp3"))},n.prototype.onGameOver=function(){var e=this;e.gameOverCtrl.setSelectedIndex(1)},n.prototype.onGameReviveOk=function(){var e=this;e.gameOverCtrl.setSelectedIndex(0)},n.prototype.showHelpPanel=function(){var t=this;e.GameMgr.getInstance().gameOver||(e.GameMgr.getInstance().setPause(!0,!1),t.helpPanel.visible=!0,egret.Tween.removeTweens(t.helpPanel),egret.Tween.get(t.helpPanel).to({alpha:1},300,egret.Ease.sineInOut),utils.Singleton.get(e.AdMgr).showBannerAd("帮助界面banner"))},n.prototype.closeHelpPanel=function(){var t=this;egret.Tween.removeTweens(t.helpPanel),egret.Tween.get(t.helpPanel).to({alpha:0},300,egret.Ease.sineInOut).call(function(){t.helpPanel.visible=!1}),utils.Singleton.get(e.AdMgr).hideBanner()},n.prototype.onRecordBtn=function(){var t=this,n=t.recordBtn.selected;e.GameMgr.getInstance().setAutoRecord(n)},n.prototype.dispose=function(){t.prototype.dispose.call(this);var e=this;e.pauseBtn.removeClickListener(e.onPauseBtn,e),e.musicBtn.removeClickListener(e.onMusicBtn,e),e.helpBtn.removeClickListener(e.showHelpPanel,e),e.closeHelpBtn.addClickListener(e.closeHelpPanel,e),e.continueBtn.removeClickListener(e.onContinueBtn,e),e.recordBtn.removeClickListener(e.onRecordBtn,e),utils.StageUtils.removeEventListener("createGame",e.onCreateGame,e),utils.EventDispatcher.getInstance().removeEventListener("updateScore",e.updateScore,e),utils.EventDispatcher.getInstance().removeEventListener("onAppPause",e.onPause,e),utils.EventDispatcher.getInstance().removeEventListener("gameRevive",e.pause,e),utils.EventDispatcher.getInstance().removeEventListener("newRound",e.onNewRound,e),utils.EventDispatcher.getInstance().removeEventListener("levelUp",e.onLevelUp,e),utils.EventDispatcher.getInstance().removeEventListener("gameOver",e.onGameOver,e),utils.EventDispatcher.getInstance().removeEventListener("gameReviveOk",e.onGameReviveOk,e)},n}(fairygui.GComponent);e.MainUI=t,__reflect(t.prototype,"planetJump.MainUI")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(e,r,o){void 0===e&&(e="leap");var a=t.call(this,e,r,o)||this;a.isShowRank=!1,a.myAvatarUrl="";var i=a;return n.instance=i,platform.isRunInTT()&&(tt.showShareMenu({}),tt.onShareAppMessage(i.onShareAppMessage)),a}return __extends(n,t),n.prototype.onShareAppMessage=function(){var t=e.GameMgr.getInstance().getShareImgUrlId(0);return{title:"一起飞跃吧！",templateId:t[0]}},n.prototype.dispose=function(){t.prototype.dispose.call(this);var e=this;platform.isRunInTT()&&tt.offShareAppMessage(e.onShareAppMessage),e.removeEventListeners(),egret.Tween.removeAllTweens(),e.destroyGame(),utils.Singleton.destroy(utils.SoundMgr),e.btnCloseRank.removeClickListener(e.onCloseRank,e)},n.prototype.addEventListeners=function(){},n.prototype.removeEventListeners=function(){},n.prototype.registerComponents=function(){var t=this;t.registerComponent("ReadyPanel",e.ReadyPanel),t.registerComponent("MainUI",e.MainUI),t.registerComponent("Player",e.Player),t.registerComponent("PlayerUI",e.PlayerUI),t.registerComponent("ScoreText",e.ScoreText),t.registerComponent("TextureBackground",e.TextureBackground),t.registerComponent("GuidePanel",e.GuidePanel),t.registerComponent("Guide0",e.Guide0),t.registerComponent("Guide1",e.Guide1),t.registerComponent("Guide2",e.Guide2),t.registerComponent("Guide3",e.Guide3),t.registerComponent("ResultPanel",e.ResultPanel),t.registerComponent("recommendBtn",e.RecommandBtn),t.registerComponent("LinkLine",e.LinkLine)},n.prototype.registerComponent=function(e,t,n){void 0===n&&(n="leap");var r=fairygui.UIPackage.getItemURL(n,e);fairygui.UIObjectFactory.setPackageItemExtension(r,t)},n.prototype.onInit=function(){t.prototype.onInit.call(this);var e=this;e.readyPanel=e.contentPane.getChild("readyPanel"),e.btnCloseRank=e.contentPane.getChild("btnCloseRank").asButton,e.btnCloseRank.addClickListener(e.onCloseRank,e),e.btnCloseRank.visible=!1,utils.Singleton.get(utils.SoundMgr).preloadBgm("back_music_mp3")},n.prototype.initGuide=function(){var t=this;if(t.isFinishGuide())e.GameMgr.getInstance().guideCompleted=!0;else{for(var n=0;4>n;n++){var r="leap_guideStep"+n;egret.localStorage.removeItem(r)}e.GameMgr.getInstance().guideCompleted=!1;var o=utils.ObjectPool.getInstance().createFairyUIObject(e.GuidePanel,"leap");t.displayListContainer.addChild(o.displayObject)}},n.prototype.isFinishGuide=function(){var e=parseInt(egret.localStorage.getItem("doGuideCount")||"0");return e>=2},n.prototype.isCompleteGuide=function(e){var t="leap_guideStep"+e,n=egret.localStorage.getItem(t);return n&&""!=n},n.prototype.createGame=function(){var t=this;t.destroyGame(),e.GameMgr.getInstance().gameBegin(),utils.Singleton.get(utils.SoundMgr).playBgm("back_music_mp3",!0),utils.StageUtils.dispatchEvent("createGame");var n=utils.ObjectPool.getInstance().createObject(e.Background);t.displayListContainer.addChildAt(n,0),t.textureBg=fairygui.UIPackage.createObject("leap","TextureBackground"),t.textureBg.visible=!1,t.displayListContainer.addChildAt(t.textureBg.displayObject,1),t.worldContainer?t.worldContainer.removeChildren():t.worldContainer=new egret.DisplayObjectContainer,t.worldContainer.x=0,t.worldContainer.y=0,t.displayListContainer.addChildAt(t.worldContainer,2);var r=utils.ObjectPool.getInstance().createObject(e.World);t.worldContainer.addChild(r),t.initGuide()},n.prototype.restartGame=function(){var e=this;e.createGame()},n.prototype.destroyGame=function(){console.log("销毁游戏"),e.ItemMgr.getInstance().dispose(),e.GameMgr.getInstance().dispose(),utils.ObjectPool.getInstance().dispose(),utils.EventDispatcher.getInstance().dispose()},n.prototype.showRankWnd=function(t,n,r,o){void 0===t&&(t="list"),void 0===n&&(n=1),void 0===r&&(r=!0),void 0===o&&(o=!0);var a=this;if(platform.isRunInTT()){if(!Main.isScopeUserInfo())return a.scope();a.isShowRank||(a.lastRankType=a.curRankType,a.curRankType=t,a.rankingListMask||(a.rankingListMask=fairygui.UIPackage.createObject("leap","RankBack"),a.rankingListMask.width=utils.StageUtils.stageWidth,a.rankingListMask.height=utils.StageUtils.stageHeight,a.parent.addChild(a.rankingListMask)),a.rankingListMask.visible=!0,a.rankingListMask.alpha=n,a.rankingListMask.touchable=r,a.rankBitmap=platform.openDataContext.createDisplayObject(null,utils.StageUtils.stageWidth,utils.StageUtils.stageHeight),a.parent.displayListContainer.addChild(a.rankBitmap),egret.Tween.get(a.rankBitmap).set({alpha:0}).to({alpha:1},500,egret.Ease.sineInOut),a.rankBitmap.anchorOffsetX=.5,a.rankBitmap.anchorOffsetY=.5,a.rankBitmap.skewY="list"==t?-4:"horizontal"==t?4:0,o&&(a.btnCloseRank.visible=!0,a.parent.displayListContainer.addChild(a.btnCloseRank.displayObject)),a.isShowRank=!0,platform.openDataContext.postMessage({isRanking:a.isShowRank,text:"egret",year:(new Date).getFullYear(),command:"open",myAvatarUrl:a.myAvatarUrl,rankType:t})),"list"==t&&utils.Singleton.get(e.AdMgr).hideBanner()}},n.prototype.scope=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r,o,a,n,i,n;return __generator(this,function(s){switch(s.label){case 0:return e=this,t=Main,[4,platform.login(!1)];case 1:return t.loginData=s.sent(),Main.isLogin()?[3,5]:[4,platform.showModal("温馨提示","排行榜需先登录获取用户信息。\n是否登录？")];case 2:return n=s.sent(),n.confirm?(r=Main,[4,platform.login(!0)]):[3,4];case 3:r.loginData=s.sent(),s.label=4;case 4:return[2];case 5:return[4,platform.getSetting()];case 6:return o=s.sent(),a=o.authSetting["scope.userInfo"],void 0!=a?[3,8]:[4,platform.authorize("scope.userInfo")];case 7:n=s.sent(),a=n.data["scope.userInfo"],s.label=8;case 8:return a?[4,platform.getUserInfo()]:[3,10];case 9:return i=s.sent(),e.myAvatarUrl=i.avatarUrl,e.showRankWnd(),[3,12];case 10:return[4,platform.showModal("排行榜用户信息授权","点击确定后将打开设置界面,\n请打开[用户信息]权限")];case 11:n=s.sent(),n.confirm&&tt.openSetting(),s.label=12;case 12:return Main.scopeUserInfo=a,[2]}})})},n.prototype.onCloseRank=function(e){var t=this;t.hideRankWnd()},n.prototype.hideRankWnd=function(){var e=this;platform.isRunInTT()&&e.isShowRank&&(e.rankBitmap&&egret.Tween.removeTweens(e.rankBitmap),e.rankBitmap.parent&&e.rankBitmap.parent.removeChild(e.rankBitmap),e.rankingListMask.visible=!1,e.isShowRank=!1,e.btnCloseRank.visible=!1,platform.openDataContext.postMessage({isRanking:e.isShowRank,text:"egret",year:(new Date).getFullYear(),command:"close"}))},n.prototype.backToReadyWindow=function(){var e=this;e.destroyGame(),e.readyPanel.show()},n}(e.BaseWindow);e.MainWindow=t,__reflect(t.prototype,"planetJump.MainWindow")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.rotateSpeed=0,e.rotateTimeAdd=0,e.invincibleTime=0,e.jumpSpeed=0,e.jumpContinueCnt=0,e.jumpHeight=400,e.rotateTime=0,e.rotateRounds=0,e.isNearEnd=!0,e}return __extends(n,t),Object.defineProperty(n.prototype,"colliderGraphics",{get:function(){var e=this;return e.colliderDisplay?e.colliderDisplay.graphics:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return new g2.Vector2(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isRotate",{get:function(){var t=this;return t.rotateTimeAdd>0||t.hasEffect(e.ItemDefine.Star)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"acceleration",{get:function(){var t=this;return t.hasEffect(e.ItemDefine.Star)?e.GameCfg.getCfg().Items[e.ItemDefine.Star].acceleration:t.hasEffect(e.ItemDefine.Thunderbolt)?e.GameCfg.getCfg().Items[e.ItemDefine.Thunderbolt].acceleration:1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isInvincible",{get:function(){return this.invincibleTime>0},enumerable:!0,configurable:!0}),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this);var e=this;e.mainUI=e.getChild("ui")},n.prototype.onTouchBegin=function(t){var n=this;t.target.parent&&t.target.parent instanceof e.MainUI||t.target.parent.parent&&t.target.parent.parent instanceof e.MainUI||(n.isPressed=!0,egret.Tween.removeTweens(n),egret.Tween.get(n).to({rotateTimeAdd:1},300,egret.Ease.sineInOut))},n.prototype.onTouchEnd=function(){var t=this;t.isPressed=!1,t.hasEffect(e.ItemDefine.Star)||(egret.Tween.removeTweens(t),egret.Tween.get(t).to({rotateTimeAdd:0},500,egret.Ease.sineInOut))},n.prototype.onCollisionEnter=function(){},n.prototype.jump=function(t){var n=this;if(n.jumpContinueCnt++,n.jumpSpeed<0&&(n.jumpContinueCnt=1),n.jumpContinueCnt>1){var r=e.World.instance.spawnUIAni(e.JumpAni,n.x+70,n.y+50);
r.setNum(n.jumpContinueCnt)}n.jumpSpeed<t&&(n.jumpSpeed=t),n.mainUI.playJumpEff(),utils.EventDispatcher.getInstance().dispatchEvent("playerJump")},n.prototype.dead=function(){var t=this;e.GameMgr.getInstance().dead(),egret.Tween.get(t.mainUI).to({alpha:0},300),e.World.instance.spawnUIAni(e.DeadAni,t.x,t.y),utils.Singleton.get(utils.SoundMgr).playSound("DM-CGS-10_edited_mp3");var n=setTimeout(function(){clearTimeout(n),utils.Singleton.get(utils.SoundMgr).playSound("Decrease_swap_1_mp3")},400)},n.prototype.onRevive=function(){var t=this;t.jumpHeight=500,t.effects={},t.jumpContinueCnt=0,t.invincibleTime=0,t.jumpSpeed=e.GameCfg.getCfg().Items[e.ItemDefine.WhiteBall].jumpSpeed,t.rotateTimeAdd=0,t.isPressed=!1;for(var n=1,r=t.jumpHeight;2>=n;n++,r-=100){var o=t.getAngle()/180*Math.PI,a=e.ItemMgr.getInstance().spawnItem(e.ItemDefine.WhiteBall,o,r),i=.1;a.init(i),e.World.instance.addItem(a.displayObject)}t.addEffect(e.ItemDefine.Plus,e.PlusEffect),utils.Singleton.get(utils.SoundMgr).playSound("revive2_mp3"),t.mainUI.alpha||(t.mainUI.alpha=1)},n.prototype.getHeight=function(){var e=this;return 0|Math.sqrt(e.x*e.x+e.y*e.y)},n.prototype.getAngle=function(){var e=this;return utils.getAngle(e.x,e.y)},n.prototype.onMove=function(){var t=this;if(t.jumpHeight+=t.jumpSpeed,t.hasEffect(e.ItemDefine.Star)||(t.jumpSpeed-=e.GameCfg.getCfg().Gravity),t.jumpSpeed<0&&t.mainUI.playFallEff(),t.jumpHeight<90)return void t.dead();t.isRotate&&(t.rotateTime+=t.rotateTimeAdd*t.acceleration);var n=e.RoundMotion.getPointByTime(t.rotateTime,t.rotateSpeed,t.jumpHeight);t.x=n.x,t.y=n.y;var r=t.getAngle();r>180&&270>r&&(t.isNearEnd=!0,utils.EventDispatcher.getInstance().dispatchEvent("nearEnd")),t.isNearEnd&&r>=270&&(t.isNearEnd=!1,t.rotateRounds++,utils.EventDispatcher.getInstance().dispatchEvent("newRound",t.rotateRounds))},n.prototype.addInvincibleTime=function(e){var t=this;!e||0>=e||(t.invincibleTime<0&&(t.invincibleTime=0),t.invincibleTime+=e)},n.prototype.onCreate=function(){var t=this;t.trail||(t.trail=new TrailRenderer,t.trail.createTrailItem=function(){var e=fairygui.UIPackage.createObject("leap","TrailItem");return e.touchable=!1,e},t.trail.init(280,.3,0,3,.7),t.displayListContainer.addChild(t.trail)),e.GameCfg.colliderDisplayCfg.display&&!t.colliderDisplay&&(t.colliderDisplay=new egret.Shape,t.displayListContainer.addChild(t.colliderDisplay)),t.rotateSpeed=e.GameCfg.getCfg().PlayerRotateSpeed,t.rotateTime=270/t.rotateSpeed,t.initCollider(21),utils.EventDispatcher.getInstance().addEventListener("gameReviveOk",t.onRevive,t),utils.StageUtils.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouchBegin,t),utils.StageUtils.addEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),utils.StageUtils.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.onTouchEnd,t),utils.StageUtils.addEventListener(egret.TouchEvent.TOUCH_CANCEL,t.onTouchEnd,t)},n.prototype.onDestroy=function(){var e=this;e.effects=null,e.colliderDisplay=null,e.trail=null,utils.EventDispatcher.getInstance().removeEventListener("gameReviveOk",e.onRevive,e),utils.StageUtils.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchBegin,e),utils.StageUtils.removeEventListener(egret.TouchEvent.TOUCH_END,e.onTouchEnd,e),utils.StageUtils.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,e.onTouchEnd,e),utils.StageUtils.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,e.onTouchEnd,e)},n.prototype.onEnterFrame=function(t){var n=this;e.GameMgr.getInstance().gameOver||(n.invincibleTime>0&&(n.invincibleTime-=e.GameCfg.frameTime),n.onMove(),n.updateTransform(),n.drawCollider(),n.mainUI.onEnterFrame(),n.trail&&n.trail.onEnterFrame(t))},n.prototype.initCollider=function(e){var t=this;t.collider=new g2.SAT.Circle(e)},n.prototype.updateTransform=function(){var e=this;e.collider&&(e.collider.x=e.x,e.collider.y=e.y,e.collider.scaleX=parseFloat(e.mainUI.face.scaleX.toFixed(2)),e.collider.scaleY=e.collider.scaleX,e.rotation=e.getAngle()-270,e.collider.rotation=e.rotation)},n.prototype.drawCollider=function(){var t=this,n=e.GameCfg.colliderDisplayCfg;if(n.display&&t.collider&&t.colliderGraphics){t.colliderGraphics.clear();var r=t.isCollided?n.collidedColor:n.color;t.colliderGraphics.lineStyle(n.lineSize,r,n.alpha),t.colliderGraphics.drawCircle(0,0,t.collider.getRadius()),t.colliderGraphics.endFill()}},n.prototype.hasEffect=function(e){var t=this;return t.effects&&t.effects[e]?!0:!1},n.prototype.addEffect=function(t,n){var r=this;if(r.effects||(r.effects={}),r.effects[t])r.effects[t].added();else{var o=utils.ObjectPool.getInstance().createObject(n);o.init(t,r),r.effects[t]=o}t==e.ItemDefine.Thunderbolt&&r.mainUI.showThunderEff(),t==e.ItemDefine.Plus&&(r.mainUI.showPlusEff(),utils.EventDispatcher.getInstance().dispatchEvent("showPlusEff")),t==e.ItemDefine.Magnet&&r.mainUI.showMagnetEff()},n.prototype.removeEffect=function(t){var n=this;n.effects&&n.effects[t]&&(delete n.effects[t],t==e.ItemDefine.Thunderbolt&&n.mainUI.removeThunderEff(),t==e.ItemDefine.Plus&&n.mainUI.removePlusEff(),t==e.ItemDefine.Magnet&&n.mainUI.removeMagnetEff())},n}(fairygui.GComponent);e.Player=t,__reflect(t.prototype,"planetJump.Player",["utils.IGameObject","g2.SAT.ICollider"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.constructFromResource=function(){e.prototype.constructFromResource.call(this);var t=this;t.face=t.getChild("face").asCom,t.eyes=t.face.getChild("eyes").asCom,t.plusEff=t.getChild("plusEff").asCom,t.plusEff.visible=!1,t.thunderEff=t.getChild("thunderEff").asCom,t.thunderEff.visible=!1,t.magnetEff=t.getChild("magnetEff").asCom,t.magnetEff.visible=!1},t.prototype.dispose=function(){e.prototype.dispose.call(this);var t=this;t.removeAllEff()},t.prototype.onEnterFrame=function(){var e=this;e.thunderEff.visible&&(e.thunderEff.rotation+=10),e.plusEff.visible&&(e.plusEff.rotation+=2)},t.prototype.playJumpEff=function(){var e=this;e.isJump||(e.isJump=!0,e.isFall=!1,egret.Tween.removeTweens(e),egret.Tween.get(e).to({scaleX:.7,scaleY:1.2},300,egret.Ease.sineInOut),egret.Tween.removeTweens(e.eyes),egret.Tween.get(e.eyes).to({scaleY:1.4,y:14},300,egret.Ease.sineInOut))},t.prototype.playFallEff=function(){var e=this;e.isFall||(e.isFall=!0,e.isJump=!1,egret.Tween.removeTweens(e),egret.Tween.get(e).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut),egret.Tween.removeTweens(e.eyes),egret.Tween.get(e.eyes).to({scaleX:1,scaleY:1,y:27},300,egret.Ease.sineInOut))},t.prototype.showThunderEff=function(){var e=this;e.thunderEff.visible||(e.thunderEff.visible=!0,egret.Tween.removeTweens(e.thunderEff),egret.Tween.get(e.thunderEff).to({alpha:1},300,egret.Ease.sineInOut))},t.prototype.removeThunderEff=function(){var e=this;e.thunderEff.visible&&(e.thunderEff.visible=!1,egret.Tween.removeTweens(e.thunderEff),egret.Tween.get(e.thunderEff).to({alpha:0},300,egret.Ease.sineInOut).call(function(){e.thunderEff.visible=!1}))},t.prototype.showPlusEff=function(){var e=this;e.plusEff.visible||(e.plusEff.visible=!0,egret.Tween.removeTweens(e.plusEff),egret.Tween.get(e.plusEff).to({alpha:1},300,egret.Ease.sineInOut),egret.Tween.removeTweens(e.face),egret.Tween.get(e.face).to({scaleX:1.5,scaleY:1.5},300,egret.Ease.sineInOut))},t.prototype.removePlusEff=function(){var e=this;e.plusEff.visible&&(egret.Tween.removeTweens(e.plusEff),egret.Tween.get(e.plusEff).to({alpha:0},300,egret.Ease.sineInOut).call(function(){e.plusEff.visible=!1}),egret.Tween.removeTweens(e.face),egret.Tween.get(e.face).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut))},t.prototype.showMagnetEff=function(){var e=this;e.magnetEff.visible=!0,egret.Tween.removeTweens(e.magnetEff),egret.Tween.get(e.magnetEff).to({alpha:1},300,egret.Ease.sineInOut)},t.prototype.removeMagnetEff=function(){var e=this;egret.Tween.removeTweens(e.magnetEff),egret.Tween.get(e.magnetEff).to({alpha:0},300,egret.Ease.sineInOut).call(function(){e.magnetEff.visible=!1})},t.prototype.removeAllEff=function(){var e=this;e.removePlusEff(),e.removeThunderEff(),e.removeMagnetEff()},t}(fairygui.GComponent);e.PlayerUI=t,__reflect(t.prototype,"planetJump.PlayerUI")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this);var e=this;e.startBtn=e.getChild("startBtn").asButton,e.startBtn.addClickListener(e.onStartBtn,e),e.rankBtn=e.getChild("rankBtn").asButton,e.rankBtn.addClickListener(e.onRankBtn,e),e.shareBtn=e.getChild("shareBtn").asButton,e.shareBtn.addClickListener(e.onShareBtn,e),e.platCtrl=e.getController("platCtrl"),e.titlePlatCtrl=e.getChild("title").asCom.getController("platCtrl"),e.initState()},n.prototype.onStartBtn=function(t){var n=this;e.MainWindow.instance.createGame(),n.hide(),utils.StageUtils.addEventListener("leaveGame",n.onLeaveGame,n)},n.prototype.initState=function(){var e=this;e.platCtrl.setSelectedPage("tt"),e.titlePlatCtrl.setSelectedPage("tt")},n.prototype.show=function(){var e=this;e.initState(),e.visible=!0,egret.Tween.get(e).to({alpha:1},300,egret.Ease.sineInOut)},n.prototype.hide=function(){var e=this;egret.Tween.get(e).to({alpha:0},300,egret.Ease.sineInOut).call(function(){e.visible=!1})},n.prototype.onLeaveGame=function(e){var t=this;t.visible=!0,t.startBtn.getTransition("t0").play(),egret.Tween.get(t).to({alpha:1},300,egret.Ease.sineInOut)},n.prototype.onRankBtn=function(t){e.MainWindow.instance.showRankWnd()},n.prototype.onShareBtn=function(t){e.GameMgr.getInstance().share()},n.prototype.dispose=function(){t.prototype.dispose.call(this);var e=this;e.startBtn.removeClickListener(e.onStartBtn,e),e.rankBtn.removeClickListener(e.onRankBtn,e),e.shareBtn.removeClickListener(e.onShareBtn,e),utils.StageUtils.removeEventListener("leaveGame",e.onLeaveGame,e)},n}(fairygui.GComponent);e.ReadyPanel=t,__reflect(t.prototype,"planetJump.ReadyPanel")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.constructFromResource=function(){e.prototype.constructFromResource.call(this);var t=this;t.addClickListener(t.onClick,t)},t.prototype.dispose=function(){e.prototype.dispose.call(this);var t=this;t.removeClickListener(t.onClick,t)},t.prototype.wladGetAds=function(){var e=this;e.curAdLogo&&e.displayListContainer.removeChild(e.curAdLogo)},t.prototype.onClick=function(e){var t=this;t.adData&&(tt.previewImage({current:t.adData.img,urls:[t.adData.img],success:null,fail:function(e){console.log("预览广告图加载失败:",e)},complete:null}),t.wladGetAds())},t}(fairygui.GButton);e.RecommandBtn=t,__reflect(t.prototype,"planetJump.RecommandBtn")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this);var e=this;e.restartBtn=e.getChild("restartBtn").asButton,e.restartBtn.addClickListener(e.onReStartBtn,e),e.homeBtn=e.getChild("homeBtn").asButton,e.homeBtn.addClickListener(e.onHomeBtn,e),e.reviveBtn=e.getChild("reviveBtn").asButton,e.reviveBtn.addClickListener(e.onReviveBtn,e),e.shareBtn=e.getChild("shareBtn").asButton,e.shareBtn.addClickListener(e.onShareBtn,e),e.txtScore=e.getChild("txtScore").asTextField,e.txtScoreBest=e.getChild("txtScoreBest").asTextField,e.noScope=e.getController("noScope"),e.alpha=0,utils.StageUtils.addEventListener("createGame",e.onCreateGame,e)},n.prototype.onCreateGame=function(){var e=this;utils.EventDispatcher.getInstance().addEventListener("gameOver",e.onGameOver,e)},n.prototype.onGameOver=function(){var e=this;e.show()},n.prototype.show=function(){var t=this;t.txtScore.text=e.GameMgr.getInstance().score+"",t.txtScoreBest.text=e.GameMgr.getInstance().scoreRecord+"",t.reviveBtn.visible=!e.GameMgr.getInstance().hasRevived,t.visible=!0,egret.Tween.get(t).to({alpha:1},500,egret.Ease.sineInOut),Main.isScopeUserInfo()?(t.noScope.setSelectedIndex(0),e.MainWindow.instance.showRankWnd("horizontal",0,!1,!1)):t.noScope.setSelectedIndex(1),utils.Singleton.get(e.AdMgr).showBannerAd("结算界面banner")},n.prototype.onReStartBtn=function(t){var n=this;e.MainWindow.instance.restartGame(),n.hide()},n.prototype.onHomeBtn=function(t){var n=this;n.hide(),e.MainWindow.instance.backToReadyWindow()},n.prototype.onReviveBtn=function(t){var n=this;e.GameMgr.getInstance().hasRevived||(n.touchable=!1,e.GameMgr.getInstance().watchVideoAd("复活广告",function(t){n.touchable=!0,t&&(e.GameMgr.getInstance().revive(),n.hide())}))},n.prototype.onShareBtn=function(t){e.GameMgr.getInstance().clipVideoOk&&e.GameMgr.getInstance().recordVideoPath?e.GameMgr.getInstance().shareVideo(null,null,null,function(){e.GameMgr.getInstance().shareFromCanvas()}):e.GameMgr.getInstance().shareFromCanvas()},n.prototype.hide=function(){var t=this;t.touchable=!1,e.MainWindow.instance.hideRankWnd(),egret.Tween.get(t).to({alpha:0},500,egret.Ease.sineInOut).call(function(){t.visible=!1,t.touchable=!0}),utils.Singleton.get(e.AdMgr).hideBanner()},n.prototype.dispose=function(){t.prototype.dispose.call(this);var e=this;e.restartBtn.removeClickListener(e.onReStartBtn,e),e.homeBtn.removeClickListener(e.onHomeBtn,e),e.reviveBtn.removeClickListener(e.onReviveBtn,e),e.shareBtn.removeClickListener(e.onShareBtn,e),utils.StageUtils.removeEventListener("createGame",e.onCreateGame,e),utils.EventDispatcher.getInstance().removeEventListener("gameOver",e.onGameOver,e)},n}(fairygui.GComponent);e.ResultPanel=t,__reflect(t.prototype,"planetJump.ResultPanel")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.constructFromResource=function(){e.prototype.constructFromResource.call(this);var t=this;t.txtScore=t.getChild("txtScore").asTextField,t.initY=t.txtScore.y},t.prototype.setScore=function(e){var t=this;egret.Tween.removeTweens(t.txtScore),egret.Tween.get(t.txtScore).to({y:t.initY-30},150,egret.Ease.sineOut).call(function(){var n=e>0?""+e:"";t.setText(n)}).to({y:t.initY},200,egret.Ease.sineInOut)},t.prototype.setText=function(e){var t=this;t.txtScore.text=e},t}(fairygui.GComponent);e.ScoreText=t,__reflect(t.prototype,"planetJump.ScoreText")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.onCreate=function(){var e=this;utils.EventDispatcher.getInstance().addEventListener("newRound",e.onNewRound,e),utils.EventDispatcher.getInstance().addEventListener("changeBgColor",e.onChangLight,e)},n.prototype.onDestroy=function(){var e=this;utils.EventDispatcher.getInstance().removeEventListener("newRound",e.onNewRound,e),utils.EventDispatcher.getInstance().removeEventListener("changeBgColor",e.onChangLight,e)},n.prototype.onEnterFrame=function(e){var t=this;t.blackHole.rotation++,t.blackHole.rotation>180&&(t.blackHole.rotation-=360)},n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this);var n=this;n.blackHole=n.getChild("blackHole").asCom,n.lightImg=n.blackHole.getChild("lightImg").asImage,n.lightImg.color=parseInt(e.GameCfg.getCfg().BgColors[0]),n.multiNum=n.getChild("multiNum").asTextField},n.prototype.onNewRound=function(e){var t=this;t.multiNum.text="x"+e},n.prototype.onChangLight=function(e){var t=this;t.lightImg.color=e},n}(fairygui.GComponent);e.SpikeCenter=t,__reflect(t.prototype,"planetJump.SpikeCenter",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastIdx=-1,t}return __extends(t,e),t.prototype.constructFromResource=function(){e.prototype.constructFromResource.call(this);var t=this,n=utils.StageUtils.stageWidth,r=utils.StageUtils.stageHeight;t.x=n/2,t.y=r/2,t.imgs=[];for(var o=Math.sqrt(n*n+r*r),a=1;8>=a;a++){var i=t.getChild("n"+a).asImage;i.width=i.height=0|o,i.setPivot(.5,.5,!0),t.imgs.push(i)}},t.prototype.show=function(){var e=this;e.visible=!0,e.curImg&&(egret.Tween.removeTweens(e.curImg),e.curImg.visible=!1);var t=0;do t=Math.random()*(e.imgs.length-1)|0;while(e.lastIdx==t);e.lastIdx=t,e.curImg=e.imgs[t],egret.Tween.get(e.curImg).set({visible:!0,alpha:0}).to({alpha:.1},500,egret.Ease.sineInOut)},t.prototype.hide=function(){var e=this;egret.Tween.removeTweens(e.curImg),egret.Tween.get(e.curImg).to({alpha:0},800,egret.Ease.sineInOut).call(function(){e.curImg.visible=!1,e.visible=!1})},t.prototype.setRotation=function(e){var t=this;t.rotation=e},t.prototype.change=function(){var e=this;e.show()},t.prototype.dispose=function(){e.prototype.dispose.call(this);var t=this;t.curImg=null,t.imgs=null},t}(fairygui.GComponent);e.TextureBackground=t,__reflect(t.prototype,"planetJump.TextureBackground")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.touchEnabled=!0,e}return __extends(n,t),n.prototype.onCreate=function(){var e=this;n.instance=e,e.init(),e.once(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),utils.EventDispatcher.getInstance().addEventListener("gameOver",e.onGameOver,e),utils.EventDispatcher.getInstance().addEventListener("playerJump",e.cameraShakeEff,e)},n.prototype.onDestroy=function(){var e=this;e.camera=null,n.instance=null,utils.EventDispatcher.getInstance().removeEventListener("gameOver",e.onGameOver,e),utils.EventDispatcher.getInstance().removeEventListener("playerJump",e.cameraShakeEff,e)},n.prototype.onEnterFrame=function(t){var n=this;n.isGameOver||(n.camera.onUpdate(),e.ItemMgr.getInstance().onUpdate(),n.updatePlayerLine())},n.prototype.onGameOver=function(){var e=this;egret.Tween.removeTweens(e.linkLine),e.linkLine.alpha=0},Object.defineProperty(n.prototype,"isGameOver",{get:function(){return e.GameMgr.getInstance().gameOver},set:function(t){e.GameMgr.getInstance().gameOver=t},enumerable:!0,configurable:!0}),n.prototype.onAddToStage=function(e){var t=this;t.x=t.stage.stageWidth/2,t.y=t.stage.stageHeight/2},n.prototype.updatePlayerLine=function(){var e=this;if(!e.isGameOver){var t=e.player.getHeight();e.linkLine.alpha||(e.linkLine.alpha=.6),e.linkLine.height=t,e.linkLine.rotation=e.player.getAngle()-90}},n.prototype.init=function(){var t=this,n=fairygui.UIPackage.createObject("leap","WoldLight");n.touchable=!1,t.addChild(n.displayObject),t.itemContainer=new egret.DisplayObjectContainer,t.itemContainer.touchEnabled=!1,t.addChild(t.itemContainer),t.endLine=utils.ObjectPool.getInstance().createObject(e.EndLine),t.endLine.touchEnabled=!1,t.addChild(t.endLine),t.linkLine=fairygui.UIPackage.createObject("leap","LinkLine"),t.linkLine.touchable=!1,t.linkLine.width=4,t.linkLine.pivotX=.5,t.linkLine.alpha=.6,t.addChild(t.linkLine.displayObject),t.player=utils.ObjectPool.getInstance().createFairyUIObject(e.Player,"leap"),t.player.touchable=!1,t.addChild(t.player.displayObject),t.spike=utils.ObjectPool.getInstance().createFairyUIObject(e.SpikeCenter,"leap"),t.spike.touchable=!1,t.addChild(t.spike.displayObject),t.camera=new Camera(t,utils.StageUtils.stageWidth,utils.StageUtils.stageHeight),t.camera.follow(t.player);for(var r=0;16>r;r++){var o=r*Math.PI/8,a=e.ItemMgr.getInstance().spawnItem(e.ItemDefine.WhiteBall,o,150,.8);a.init(.01+.05*Math.random()),t.addItem(a.displayObject)}},n.prototype.addItem=function(e){var t=this;t.itemContainer.addChild(e)},n.prototype.spawnUIAni=function(e,t,n){var r=this,o=utils.ObjectPool.getInstance().createFairyUIObject(e,"leap");return o.touchable=!1,r.itemContainer.addChild(o.displayObject),o.x=0|t,o.y=0|n,o.getTransition("t0").play(function(){utils.ObjectPool.getInstance().destroyObject(o)},r),o},n.prototype.cameraShakeEff=function(){var e=this,t=e.parent.x,n=e.parent.y;egret.Tween.removeTweens(e.parent),egret.Tween.get(e.parent).to({x:t+12,y:n+12},100,egret.Ease.backInOut).to({x:t-8,y:n-8},10,egret.Ease.backInOut).to({x:t+4,y:n+4},100,egret.Ease.backInOut).to({x:t,y:n},100,egret.Ease.sineInOut)},n}(egret.Sprite);e.World=t,__reflect(t.prototype,"planetJump.World",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.constructFromResource=function(){e.prototype.constructFromResource.call(this);var t=this;t.txt=t.getChild("txt").asTextField},t.prototype.onCreate=function(){},t.prototype.onDestroy=function(){},t.prototype.onEnterFrame=function(e){},t.prototype.setScore=function(e){var t=this;t.txt.text="+"+e},t}(fairygui.GComponent);e.AddScoreAni=t,__reflect(t.prototype,"planetJump.AddScoreAni",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onCreate=function(){},t.prototype.onDestroy=function(){},t.prototype.onEnterFrame=function(e){},t}(fairygui.GComponent);e.CollisionAni=t,__reflect(t.prototype,"planetJump.CollisionAni",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onCreate=function(){},t.prototype.onDestroy=function(){},t.prototype.onEnterFrame=function(e){},t}(fairygui.GComponent);e.CollisionBlackAni=t,__reflect(t.prototype,"planetJump.CollisionBlackAni",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onCreate=function(){},t.prototype.onDestroy=function(){},t.prototype.onEnterFrame=function(e){},t}(fairygui.GComponent);e.DeadAni=t,__reflect(t.prototype,"planetJump.DeadAni",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onCreate=function(){},t.prototype.onDestroy=function(){},t.prototype.onEnterFrame=function(e){},t}(fairygui.GComponent);e.ExplodeAni=t,__reflect(t.prototype,"planetJump.ExplodeAni",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.constructFromResource=function(){e.prototype.constructFromResource.call(this);var t=this;t.txt=t.getChild("n0").asCom.getChild("txt").asTextField},t.prototype.onCreate=function(){},t.prototype.onDestroy=function(){},t.prototype.onEnterFrame=function(e){},t.prototype.setNum=function(e){var t=this;t.txt.text=e+""},t}(fairygui.GComponent);e.JumpAni=t,__reflect(t.prototype,"planetJump.JumpAni",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype["do"]=function(t){e.prototype["do"].call(this,t);var n=this;n.x=.5*utils.StageUtils.stageWidth,n.y=.65*utils.StageUtils.stageHeight,utils.StageUtils.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onTouchBegin,n)},t.prototype.onTouchBegin=function(){var e=this;utils.StageUtils.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchBegin,e),egret.Tween.get(e).to({alpha:0},300,egret.Ease.sineInOut).call(function(){e.complete()})},t}(e.GuideUI);e.Guide0=t,__reflect(t.prototype,"planetJump.Guide0")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this)},n.prototype["do"]=function(n){t.prototype["do"].call(this,n);var r=this,o=e.World.instance.spike,a=e.World.instance.localToGlobal(o.x,o.y);r.x=a.x+80,r.y=a.y,r.getTransition("t0").play(function(){utils.StageUtils.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onStageTouch,r)},r)},n.prototype.onStageTouch=function(){var e=this;utils.StageUtils.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onStageTouch,e),e.getTransition("t1").play(function(){e.complete()},e)},n}(e.GuideUI);e.Guide1=t,__reflect(t.prototype,"planetJump.Guide1")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this)},n.prototype["do"]=function(n){t.prototype["do"].call(this,n);var r=this,o=e.World.instance.player,a=(o.getAngle()-15)/180*Math.PI,i=o.getHeight(),s=e.GameCfg.getCfg().Items[e.ItemDefine.ObCircle],l=e.ItemMgr.getInstance().spawnItem(e.ItemDefine.ObCircle,a,i);l.init(s.speed),e.World.instance.addItem(l.displayObject),l.rotation=l.getAngle()-270;var p=l.displayObject.parent.localToGlobal(l.x,l.y);r.x=p.x-20,r.y=p.y-20,r.getTransition("t0").play(function(){utils.StageUtils.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onStageTouch,r)},r)},n.prototype.onStageTouch=function(){var e=this;utils.StageUtils.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onStageTouch,e),e.getTransition("t1").play(function(){e.complete()},e)},n}(e.GuideUI);e.Guide2=t,__reflect(t.prototype,"planetJump.Guide2")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this)},n.prototype["do"]=function(n){t.prototype["do"].call(this,n);var r=this,o=e.World.instance.player,a=(o.getAngle()+15)/180*Math.PI,i=o.getHeight(),s=e.ItemMgr.getInstance().spawnItem(e.ItemDefine.Plus,a,i,e.Prop.scaleUnit);e.World.instance.addItem(s.displayObject);var l=s.displayObject.parent.localToGlobal(s.x,s.y);r.x=l.x+20,r.y=l.y-20,r.getTransition("t0").play(function(){utils.StageUtils.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.onStageTouch,r)},r)},n.prototype.onStageTouch=function(){var e=this;utils.StageUtils.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onStageTouch,e),e.getTransition("t1").play(function(){e.complete()},e)},n}(e.GuideUI);e.Guide3=t,__reflect(t.prototype,"planetJump.Guide3")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.onCreate=function(){var e=this;e.touchable=!1,utils.EventDispatcher.getInstance().once("guideCompleted",function(){utils.ObjectPool.getInstance().destroyObject(e);var t=parseInt(egret.localStorage.getItem("doGuideCount")||"0");t++,egret.localStorage.setItem("doGuideCount",t.toString())},e)},n.prototype.onDestroy=function(){var e=this;e.removeFromParent()},n.prototype.onEnterFrame=function(){var t=this,n=e.World.instance.player,r=n.getAngle(),o=-1;t.isCompleteGuide(0)?t.isCompleteGuide(1)?t.isCompleteGuide(2)?t.isCompleteGuide(3)||r>180&&360>r&&n.getHeight()>350&&(o=3):r>45&&135>r&&n.jumpSpeed<-1&&(o=2):r>315&&360>r&&n.jumpSpeed<0&&(o=1):o=0,o>=0&&(e.GameMgr.getInstance().setPause(!0,!1),t.createGuideUI(o))},n.prototype.createGuideUI=function(e){var t=this;t.visible=!0,t.touchable=!0;var n=fairygui.UIPackage.createObject("leap","Guide"+e);t.addChild(n),n["do"](e)},n.prototype.isCompleteGuide=function(e){var t="leap_guideStep"+e,n=egret.localStorage.getItem(t);return null!=n&&""!=n},n}(fairygui.GComponent);e.GuidePanel=t,__reflect(t.prototype,"planetJump.GuidePanel",["utils.IGameObject"])}(planetJump||(planetJump={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){},t.prototype.onProgress=function(e,t){},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.isLogin=function(){return t.loginData.isLogin},t.isScopeUserInfo=function(){return 1==t.scopeUserInfo},t.prototype.onAddToStage=function(e){egret.lifecycle.onPause=function(){egret.ticker.pause(),utils.EventDispatcher.getInstance().dispatchEvent("onAppPause")},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),this.createGameScene(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 2:return n.sent(),this.stage.removeChild(e),platform.openDataContext&&platform.openDataContext.postMessage({command:"loadRes"}),[3,4];case 3:return t=n.sent(),console.error(t),[3,4];case 4:return[2]}})})},t.prototype.createGameScene=function(){fairygui.UIPackage.addPackage("leap"),this.stage.addChild(fairygui.GRoot.inst.displayObject),this.stage.removeChild(this);var e=new planetJump.MainWindow;e.show()},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){}return e.prototype.isRunInTT=function(){return!1},e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{}]})})},e.prototype.getSetting=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e={},e.authSetting={},[2,e]})})},e.prototype.getSystemInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,null]})})},e.prototype.getUserCloudStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,null]})})},e.prototype.createBannerAd=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,null]})})},e.prototype.createVideoAd=function(e){return null},e.prototype.isRuniOS=function(){return!0},e.prototype.setUserCloudStorage=function(e,t,n,r){},e.prototype.loadFont=function(e){},e.prototype.getGameRecorderManager=function(){return null},e.prototype.showToast=function(e,t){console.log(e)},e.prototype.authorize=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,null]})})},e.prototype.showModal=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,null]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var planetJump;!function(e){var t=function(){function t(){this.gameOver=!1,this.score=0,this.multiNum=1,this.level=1;var e=this;if(platform.isRunInTT()){var t=egret.localStorage.getItem("openAutoRecord");t&&""!=t&&"open"!=t&&"1"!=t?e.openAutoRecordFlag=!1:e.openAutoRecordFlag=!0;var n=platform.getGameRecorderManager();n.onStop(function(t){console.log("录屏结束,videoPath：",t.videoPath),e.isRecording=!1,e.recordTime=0,n.clipVideo({path:t.videoPath,timeRange:[10,0],success:function(t){console.log("剪辑视频完成：",t.videoPath),e.recordVideoPath=t.videoPath,e.clipVideoOk=!0},fail:function(e){console.error(e)}})}),n.onError(function(t){e.clipVideoOk=!1,console.log("录屏错误：",t)}),n.onStart(function(t){e.clipVideoOk=!1,console.log("录屏开始：",t)})}utils.EventDispatcher.getInstance().addEventListener("newRound",e.onNewRound,e)}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance
},t.prototype.dispose=function(){var e=this;e.level=1,e.score=0,utils.EventDispatcher.getInstance().removeEventListener("newRound",e.onNewRound,e),e.timer&&(utils.ObjectPool.getInstance().destroyObject(e.timer),e.timer=null),t.instance=null,console.log("GameMgr释放")},Object.defineProperty(t.prototype,"isPaused",{get:function(){return utils.ObjectPool.getInstance().pause},enumerable:!0,configurable:!0}),t.prototype.gameBegin=function(){var e=this;e.gameOver=!1,e.hasRevived=!1;var t=egret.localStorage.getItem("scoreRecord");if(t&&""!=t){var n=parseInt(egret.localStorage.getItem("recordTime"));e.isSameWeek(n)?e.scoreRecord=parseInt(t):(e.scoreRecord=0,egret.localStorage.setItem("scoreRecord","0"))}else e.scoreRecord=0;e.openAutoRecordFlag&&e.recordOrStopVideo(),utils.EventDispatcher.getInstance().dispatchEvent("startGame")},t.prototype.isSameWeek=function(e){e=parseInt(e);var t=(new Date).getTime(),n=864e5,r=new Date(e),o=new Date(t),a=r.getDay(),i=o.getDay();0==i&&(i=7),0==a&&(a=7);var s=!1;return i>a?7*n>t-e&&(s=!0):a==i&&n>t-e&&(s=!0),s},t.prototype.startTimer=function(t,n,r){var o=this;o.timer||(o.timer=utils.ObjectPool.getInstance().createObject(e.MyTimer)),o.timer.startTimer(t,n,r)},t.prototype.onNewRound=function(e){var t=this;t.multiNum=e},t.prototype.addScore=function(t){var n=this;if(t&&!(0>=t)){var r=t*n.multiNum;n.score+=r;var o,a=n.level+1;if(8>a){var i=e.GameCfg.getLevelCfg(a);o=i.score}else{var i=e.GameCfg.getLevelCfg(8);o=i.score[0]+i.score[1]*Math.pow(a-7,2)+i.score[2]*(a-7)}return n.score>=o&&(n.level++,utils.EventDispatcher.getInstance().dispatchEvent("levelUp",n.level)),utils.EventDispatcher.getInstance().dispatchEvent("updateScore",n.score),r}},t.prototype.dead=function(){var e=this;if(e.gameOver=!0,e.score>e.scoreRecord){var t=Date.now();egret.localStorage.setItem("scoreRecord",e.score.toString()),egret.localStorage.setItem("recordTime",t.toString()),e.scoreRecord=e.score;var n={ttgame:{score:e.score,update_time:t/1e3|0},recordTime:t.toString()},r={key:"rank",value:JSON.stringify(n)};Main.isScopeUserInfo()&&platform.setUserCloudStorage([r],function(e){console.log("排行榜分数设置:",e)})}e.setPause(!0),e.recordOrStopVideo(!0),utils.Singleton.get(utils.SoundMgr).pauseBgm(),utils.EventDispatcher.getInstance().dispatchEvent("gameOver")},t.prototype.revive=function(){var e=this;e.hasRevived||(e.hasRevived=!0,e.gameOver=!1,utils.EventDispatcher.getInstance().dispatchEvent("gameRevive"),utils.EventDispatcher.getInstance().once("gameResume",function(){utils.EventDispatcher.getInstance().dispatchEvent("gameReviveOk"),e.recordOrStopVideo(),utils.Singleton.get(utils.SoundMgr).resumeBgm()},e))},t.prototype.setPause=function(e,t){void 0===t&&(t=!0);var n=this;n.isPaused!=e&&(utils.ObjectPool.getInstance().pause=e,utils.EventDispatcher.getInstance().dispatchEvent(e?"gamePause":"gameResume"))},t.prototype.share=function(e,t){void 0===t&&(t=-1);var n=this;if(platform.isRunInTT()){var r=n.getShareImgUrlId(t);tt.shareAppMessage({templateId:r[0],success:function(){console.log("分享成功")},fail:function(e){console.log("分享失败")}})}},t.prototype.shareFromCanvas=function(e,t,n,r,o,a,i){void 0===t&&(t=0),void 0===n&&(n=200),void 0===r&&(r=720),void 0===o&&(o=576),void 0===a&&(a=425),void 0===i&&(i=340);var s=this;if(platform.isRunInTT()){e||(e=s.getShareTittle());var l=canvas.toTempFilePathSync({x:t,y:n,width:r,height:o,destWidth:a,destHeight:i});tt.shareAppMessage({title:e,imageUrl:l,success:function(){console.log("分享成功")},fail:function(e){console.log("分享失败")}})}},t.prototype.shareVideo=function(e,t,n,r){var o=this;o.recordVideoPath&&tt.shareAppMessage({channel:"video",title:e||"这个feel倍爽！",desc:t||"这音乐节奏根本停不下来啊！",extra:{videoPath:o.recordVideoPath,videoTopics:["LeapOn","飞跃吧"]},success:function(){console.log("分享视频成功"),n&&n(),o.recordVideoPath=null},fail:function(e){console.log("分享视频失败"),r&&r(),o.recordVideoPath=null}})},t.prototype.getShareImgUrlId=function(e){void 0===e&&(e=-1);var t=[["2a7l46ei8ll1579ldl","https://sf1-ttcdn-tos.pstatp.com/img/developer/app/tt75250398ea0f6cbe/si7189869~noop.image"],["1k41r8ua0fx5efjmgj","https://sf1-ttcdn-tos.pstatp.com/img/developer/app/tt75250398ea0f6cbe/si655571e~noop.image"],["g176e69ajj1ddj3qir","https://sf1-ttcdn-tos.pstatp.com/img/developer/app/tt75250398ea0f6cbe/sic070d8c~noop.image"],["p3c22o8o8k32mb85jg","https://sf1-ttcdn-tos.pstatp.com/img/developer/app/tt75250398ea0f6cbe/sib51cc18~noop.image"]];if(-1==e){var n=Math.random()*t.length|0;return t[n]}return t[e]},t.prototype.getShareTittle=function(){var e=["这可能是最另类的跳一跳了~","为了逃离黑洞，你不得不跳！","这游戏火了就你不知道？好友圈都在玩！","这游戏要是能上3000分就证明你有点东西~","你永远不知道下一个背景是什么颜色。","首次发现黑洞，地球命运掌握在你的手里！","听说有点难？这分数不服来战！","太好玩了！破纪录就靠你了，快来帮我复活。","这音乐节奏根本停不下来啊！","旋转，跳跃，但是我不能闭着眼！因为..."],t=Math.random()*e.length|0;return e[t]},t.prototype.watchVideoAd=function(t,n){var r=this;return platform.isRunInTT()?void utils.Singleton.get(e.AdMgr).watchVideoAd(t,function(e){n(e)},function(){r.shareFromCanvas(),n(!0)}):n(!0)},t.prototype.recordOrStopVideo=function(e){var t=this;if(platform.isRunInTT()){if(e)return t.stopRecord();if(t.isRecording){var n=Date.now()-t.recordTime;n>3e3?t.stopRecord():console.warn("录屏时长需大于3秒~")}else{t.isRecording=!0;var r=platform.getGameRecorderManager();r.start({duration:30}),t.recordTime=Date.now()}}},t.prototype.recordClip=function(e){var t=this;if(platform.isRunInTT()&&t.isRecording){var n=platform.getGameRecorderManager();n.recordClip({timeRange:e,success:function(e){console.log("recordClip success:",e)},fail:function(e){console.warn("recordClip fail:",e)},complete:function(e){}}),t.recordTime=Date.now()}},t.prototype.stopRecord=function(){var e=this,t=platform.getGameRecorderManager();t.stop(),e.isRecording=!1,e.recordTime=0},t.prototype.setAutoRecord=function(e){var t=this;t.openAutoRecordFlag=e,egret.localStorage.setItem("openAutoRecord",e?"open":"close")},t}();e.GameMgr=t,__reflect(t.prototype,"planetJump.GameMgr")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(){function e(){}return e.WhiteBall="WhiteBall",e.ScoreBall_new="ScoreBall_new",e.Explode="Explode",e.ExplodeSpike="ExplodeSpike",e.MegaJump="MegaJump",e.Star="Star",e.Thunderbolt="Thunderbolt",e.Plus="Plus",e.Magnet="Magnet",e.Cut="Cut",e.ObCircle="ObCircle",e.ObTriangle="ObTriangle",e.ObSquare_new="ObSquare_new",e.ObTube="ObTube",e}();e.ItemDefine=t,__reflect(t.prototype,"planetJump.ItemDefine")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(){function t(){this.lastCheckPlayerPos={};var e=this;e.spawnItems=[],e.itemNumRecord={},e.registerItem()}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.dispose=function(){var e=this;e.spawnItems=null,e.itemNumRecord=null,e.itemClasses=null,t.instance=null,console.log("ItemMgr释放")},t.prototype.registerItem=function(){var t=this;t.itemClasses={},t.itemClasses[e.ItemDefine.WhiteBall]=e.WhiteBall,t.itemClasses[e.ItemDefine.ScoreBall_new]=e.ScoreBall_new,t.itemClasses[e.ItemDefine.Explode]=e.Explode,t.itemClasses[e.ItemDefine.ExplodeSpike]=e.ExplodeSpike,t.itemClasses[e.ItemDefine.MegaJump]=e.MegaJump,t.itemClasses[e.ItemDefine.Star]=e.Star,t.itemClasses[e.ItemDefine.Thunderbolt]=e.Thunderbolt,t.itemClasses[e.ItemDefine.Magnet]=e.Magnet,t.itemClasses[e.ItemDefine.Plus]=e.Plus,t.itemClasses[e.ItemDefine.Cut]=e.Cut,t.itemClasses[e.ItemDefine.ObCircle]=e.ObCircle,t.itemClasses[e.ItemDefine.ObTriangle]=e.ObTriangle,t.itemClasses[e.ItemDefine.ObSquare_new]=e.ObSquare_new,t.itemClasses[e.ItemDefine.ObTube]=e.ObTube,t.spwaners=[],t.spwaners.push(new e.WhiteBallSpawner),t.spwaners.push(new e.ScoreBallSpawner),t.spwaners.push(new e.ExplodeSpawner),t.spwaners.push(new e.MegaJumpSpawner),t.spwaners.push(new e.StarSpawner),t.spwaners.push(new e.ThunderboltSpawner),t.spwaners.push(new e.PlusSpawner),t.spwaners.push(new e.MagnetSpawner),t.spwaners.push(new e.CutSpawner),t.spwaners.push(new e.ObCircleSpawner),t.spwaners.push(new e.ObTriangleSpawner),t.spwaners.push(new e.ObSquareSpawner),t.spwaners.push(new e.ObTubeSpawner)},t.prototype.spawnItem=function(t,n,r,o){void 0===o&&(o=1);var a=this,i=a.itemClasses[t];if(i){var s=utils.ObjectPool.getInstance().createFairyUIObject(i,"leap");s.touchable=!1;var l=r*Math.cos(n),p=r*Math.sin(n);return s.x=l+e.World.instance.spike.x|0,s.y=p+e.World.instance.spike.y|0,s.scaleX=s.scaleY=parseFloat(o.toFixed(1)),a.spawnItems.push(s),a.itemNumRecord[s.key]=(a.itemNumRecord[s.key]||0)+1,s}},t.prototype.destroyItem=function(e){var t=this,n=t.spawnItems.indexOf(e);-1!=n&&t.spawnItems.splice(n,1),t.itemNumRecord[e.key]&&t.itemNumRecord[e.key]>0&&t.itemNumRecord[e.key]--;var r=e.displayObject.parent;r&&r.removeChild(e.displayObject),utils.ObjectPool.getInstance().destroyObject(e)},t.prototype.onUpdate=function(){var e=this;e.collisionCheck(),e.onSpawnsUpdate()},t.prototype.collisionCheck=function(){for(var t=this,n=e.World.instance.player,r={x:n.x,y:n.y},o=n.collider,a=0;a<t.spawnItems.length;a++){var i=t.spawnItems[a];if(i.colliderEnabled&&i.key!=e.ItemDefine.ExplodeSpike){var s=n.x-i.x,l=n.y-i.y,p=s*s+l*l;if(!(p>1e4)){var u=g2.SAT.checkCollision(o,i.collider);if(n.isCollided=u,i.isCollided=u,u){if(n.onCollisionEnter(),i.onCollisionEnter(n,t.lastCheckPlayerPos||r),e.GameMgr.getInstance().gameOver)break;t.destroyItem(i),a--}}}}t.lastCheckPlayerPos=r},t.prototype.bulletCollisionCheck=function(e){for(var t=this,n=e.collider,r=0;r<t.spawnItems.length;r++){var o=t.spawnItems[r];if(o.colliderEnabled&&-1!=o.key.indexOf("Ob")){var a=e.x-o.x,i=e.y-o.y,s=a*a+i*i;if(!(s>1e4)){var l=g2.SAT.checkCollision(n,o.collider);if(e.isCollided=l,o.isCollided=l,l){o.onCollisionEnter(e),t.destroyItem(o),t.destroyItem(e);break}}}}},t.prototype.onSpawnsUpdate=function(){var t=this;if(e.GameMgr.getInstance().guideCompleted)for(var n=0,r=t.spwaners.length;r>n;n++)t.spwaners[n].onUpdate()},t.prototype.findItemsByRange=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var o=this,a=[],i=0,s=o.spawnItems.length;s>i;i++){var l=o.spawnItems[i];if(l.colliderEnabled){var p=g2.Vector2.substract(e,l.position);p.length<=t&&-1!=n.indexOf(l.key)&&a.push(l)}}return a},t.prototype.findItemsByKey=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this,r=[],o=0,a=n.spawnItems.length;a>o;o++){var i=n.spawnItems[o];i.colliderEnabled&&-1!=e.indexOf(i.key)&&r.push(i)}return r},t.prototype.getItemSpawnNum=function(e){var t=this;return t.itemNumRecord[e]||0},t}();e.ItemMgr=t,__reflect(t.prototype,"planetJump.ItemMgr")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(){function t(){this.gameRunTime=0}return t.prototype.startTimer=function(e,t,n){var r=this,o={};o.endTime=r.gameRunTime+e,o.callBack=t,o.thisObj=n,r.timers.push(o)},t.prototype.onCreate=function(){var e=this;e.timers=[]},t.prototype.onDestroy=function(){var e=this;e.timers=null,console.log("MyTimer onDestroy:",e.key)},t.prototype.onEnterFrame=function(t){var n=this;n.gameRunTime+=e.GameCfg.frameTime;for(var r=0;r<n.timers.length;r++){var o=n.timers[r];o.endTime<=n.gameRunTime&&(o.callBack.call(o.thisObj),n.timers.splice(r--,1))}},t}();e.MyTimer=t,__reflect(t.prototype,"planetJump.MyTimer",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(){function e(){}return e.getCfg=function(){return e.cfg||(e.cfg=RES.getRes("leapConfig_json")),e.cfg},e.getLevelCfg=function(t){return t>8&&(t=8),e.getCfg().LevelCfg[t]},e.frameTime=33,e.colliderDisplayCfg={display:!1,color:65280,collidedColor:16711680,alpha:1,lineSize:2},e.cfg=null,e}();e.GameCfg=t,__reflect(t.prototype,"planetJump.GameCfg")}(planetJump||(planetJump={}));var Camera=function(){function e(e,t,n){this.worldRadius=3e3,this.worldMinScale=.25,this.screenCenter={};var r=this;r.worldRoot=e,r.stageWidth=t,r.stageHeight=n,r.screenCenter.x=.5*r.stageWidth,r.screenCenter.y=.5*r.stageHeight}return e.prototype.follow=function(e,t){void 0===t&&(t=150);var n=this;n.target=e,n.targetMoveRadius=n.stageWidth/2-t},e.prototype.onUpdate=function(){var e=this;e.followTarget()},e.prototype.followTarget=function(){var e=this;if(e.target){var t=Math.sqrt(e.target.x*e.target.x+e.target.y*e.target.y),n=1-t/e.worldRadius;n=Math.max(n,e.worldMinScale),e.worldRoot.scaleX=parseFloat(n.toFixed(3)),e.worldRoot.scaleY=parseFloat(n.toFixed(3));var r=Math.atan(e.target.y/e.target.x),o=Math.cos(r),a=Math.sin(r);o*=e.target.x<0?-1:1,a*=e.target.x<0?-1:1;var i=e.targetMoveRadius*o|0,s=e.targetMoveRadius*a|0,l=Math.min(t/e.targetMoveRadius,1);i*=l,s*=l;var p=t*(1-n);i+=p*o,s+=p*a;var u=-e.target.x+e.screenCenter.x+i,c=-e.target.y+e.screenCenter.y+s;e.worldRoot.x=parseFloat(u.toFixed(2)),e.worldRoot.y=parseFloat(c.toFixed(2))}},e}();__reflect(Camera.prototype,"Camera");var planetJump;!function(e){var t=function(){function e(){}return e.getPointByTime=function(e,t,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o={x:0,y:0}),!t||0>=t)return o;var a=t*e;a>360&&(a%=360);var i=a/180*Math.PI,s=o.x+Math.cos(i)*n,l=r?o.y+Math.sin(i)*n:o.y-Math.sin(i)*n;return s=0|s,l=0|l,{x:s,y:l}},e}();e.RoundMotion=t,__reflect(t.prototype,"planetJump.RoundMotion")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.init=function(n,r){t.prototype.init.call(this,n,r);var o=this;o.lastPos=r.position,r.addInvincibleTime(o.cfg.invincibleTime),e.World.instance.linkLine.setColor()},n.prototype.onDestroy=function(){t.prototype.onDestroy.call(this);e.World.instance&&e.World.instance.linkLine.resetColor()},n.prototype.onUpdate=function(){for(var t=this,n=e.ItemMgr.getInstance().findItemsByKey(e.ItemDefine.ObCircle,e.ItemDefine.ObSquare_new,e.ItemDefine.ObTriangle,e.ItemDefine.ObTube),r=0,o=n.length;o>r;r++){var a=n[r],i=.5*Math.min(a.img.width,a.img.height)|0,s=t.lineCircleHitTest({x:0,y:0},{x:t.player.x,y:t.player.y},{x:a.x,y:a.y},i);s||(s=t.pointInTriangle(a.x,a.y,0,0,t.player.x,t.player.y,t.lastPos.x,t.lastPos.y)),s&&(a.onCollisionEnter(t.player),e.ItemMgr.getInstance().destroyItem(a))}t.lastPos=t.player.position},n.prototype.lineCircleHitTest=function(e,t,n,r){var o=e.x-n.x,a=e.y-n.y,i=o*o+a*a|0,s=t.x-n.x,l=t.y-n.y,p=s*s+l*l|0,u=r*r;if(u>i||u>p)return!0;var c=this.disPointToLine(n,e,t);if(r>c){var d=e.x-t.x,g=e.y-t.y,m=d*d+g*g|0,f=Math.max(i,p);if(m>f-c*c)return!0}return!1},n.prototype.disPointToLine=function(e,t,n){var r=n.y-t.y,o=t.x-n.x,a=n.x*t.y-t.x*n.y,i=Math.abs(r*e.x+o*e.y+a)/Math.sqrt(r*r+o*o);return 0|i},n.prototype.pointInTriangle=function(e,t,n,r,o,a,i,s){var l=(a-s)*(n-i)+(i-o)*(r-s),p=((a-s)*(e-i)+(i-o)*(t-s))/l,u=((s-r)*(e-i)+(n-i)*(t-s))/l,c=1-p-u;return p>=0&&1>=p&&u>=0&&1>=u&&c>=0&&1>=c},n}(e.PropEffect);e.CutEffect=t,__reflect(t.prototype,"planetJump.CutEffect")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.foundItemIds=[],e.foundItems=[],e}return __extends(n,t),n.prototype.onUpdate=function(){var t=this,n=e.ItemMgr.getInstance().findItemsByRange(t.player.position,t.cfg.range,e.ItemDefine.WhiteBall,e.ItemDefine.ScoreBall_new);if(!n.length)return t.foundItems=[],void(t.foundItemIds=[]);for(var r=0,o=n.length;o>r;r++){var a=n[r];-1==t.foundItemIds.indexOf(a.hashCode)&&(t.foundItemIds.push(a.hashCode),t.foundItems.push(a))}var i=t.cfg.attractionRange[0]+Math.random()*(t.cfg.attractionRange[1]-t.cfg.attractionRange[0]);i=0|i;for(var r=0;r<t.foundItems.length;r++){var s=t.foundItems[r];if(s.displayObject.parent){var l=t.player.x-s.x,p=t.player.y-s.y;s.setSpeed(i,l,p)}else t.foundItems.splice(r--,1)}},n.prototype.onCreate=function(){var e=this;t.prototype.onCreate.call(this),e.foundItemIds=[],e.foundItems=[]},n.prototype.onDestroy=function(){var e=this;t.prototype.onDestroy.call(this);for(var n=0,r=e.foundItems.length;r>n;n++){var o=e.foundItems[n];o.setSpeed(o.speed,o.x,o.y)}e.foundItems=null,e.foundItemIds=null},n}(e.PropEffect);e.MagnetEffect=t,__reflect(t.prototype,"planetJump.MagnetEffect")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.init=function(n,r){t.prototype.init.call(this,n,r);var o=this;o.player.addInvincibleTime(o.cfg.invincibleTime),e.MainWindow.instance.textureBg.show()},n.prototype.added=function(){t.prototype.added.call(this),e.MainWindow.instance.textureBg.change()},n.prototype.onUpdate=function(){var t=this;e.MainWindow.instance.textureBg.setRotation(t.player.rotation)},n.prototype.onDestroy=function(){t.prototype.onDestroy.call(this);e.MainWindow.instance&&e.MainWindow.instance.textureBg.hide()},n}(e.PropEffect);e.PlusEffect=t,__reflect(t.prototype,"planetJump.PlusEffect")}(planetJump||(planetJump={}));var TrailRenderer=function(e){function t(){var t=e.call(this)||this;t.trailScale=1,t.initTrailScale=1;var n=t;return n.touchEnabled=!1,n.trailItemCache=[],n.once(egret.Event.ADDED_TO_STAGE,n.onAdded,n),n.once(egret.Event.REMOVED_FROM_STAGE,n.onRemoved,n),t}return __extends(t,e),t.prototype.onAdded=function(e){var t=this;t.target=t.parent},t.prototype.onRemoved=function(e){var t=this;egret.Tween.removeTweens(t),t.trailItemCache=null},t.prototype.onEnterFrame=function(e){var t=this;t.inited&&t.parent&&t.drawTrail()},t.prototype.init=function(e,t,n,r,o){void 0===e&&(e=500),void 0===t&&(t=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0);var a=this;a.trailDensity=r,a.trailLife=e,a.trailScale=o,a.initTrailScale=o,a.alphaFrom=t,a.alphaTo=n,a.inited=!0},t.prototype.drawTrail=function(){var e=this;e.lastTargetPos||(e.lastTargetPos={},e.lastTargetPos.x=e.target.x,e.lastTargetPos.y=e.target.y);var t=e.target.x-e.lastTargetPos.x,n=e.target.y-e.lastTargetPos.y;if(e.lastTargetPos.x=e.target.x,e.lastTargetPos.y=e.target.y,!(Math.abs(t)<1&&Math.abs(n)<1))for(var r=Math.sqrt(t*t+n*n),o=Math.acos(t/r),a=e.trailDensity||r,i=function(t){var i=r/a*t,s=i*Math.cos(o),l=i*Math.sin(o);l*=0>n?-1:1;var p=parseFloat((e.target.x-s).toFixed(1)),u=parseFloat((e.target.y-l).toFixed(1)),c=e.drawTrailItem(p,u),d=33,g=1-d/e.trailLife/a*t;g*=e.trailScale,g=parseFloat(g.toFixed(2)),egret.Tween.get(c).set({scaleX:g,scaleY:g}).to({alpha:e.alphaTo,scaleX:0,scaleY:0},e.trailLife,egret.Ease.sineInOut).call(function(){e.cacheItem(c)})},s=0;a>s;s++)i(s)},t.prototype.drawTrailItem=function(e,t){var n=this,r=n.getCacheItem();return r||(r=n.createTrailItem(),r.alpha=n.alphaFrom,n.target.parent.addChildAt(r.displayObject?r.displayObject:r,0)),r.x=e,r.y=t,r},t.prototype.createTrailItem=function(){var e=new egret.Shape;return e.graphics.beginFill(16777215),e.graphics.drawCircle(0,0,15),e.graphics.endFill(),e},t.prototype.getCacheItem=function(){var e=this,t=e.trailItemCache.pop()||null;return t&&(t.visible=!0),t},t.prototype.cacheItem=function(e){var t=this;e.visible=!1,e.alpha=t.alphaFrom,e.scaleX=t.trailScale,e.scaleY=t.trailScale,t.trailItemCache&&t.trailItemCache.push(e)},t}(egret.DisplayObject);__reflect(TrailRenderer.prototype,"TrailRenderer");var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t,n){e.prototype.init.call(this,t,n);var r=this;egret.Tween.removeTweens(r.player),n.rotateTimeAdd=1,n.trail.trailScale=1,n.jumpSpeed<0&&(n.jumpSpeed=0),n.addInvincibleTime(r.cfg.invincibleTime)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this);var t=this;t.player.isPressed||(egret.Tween.removeTweens(t.player),egret.Tween.get(t.player).to({rotateTimeAdd:0},500)),t.player.trail&&(t.player.trail.trailScale=t.player.trail.initTrailScale)},t}(e.PropEffect);e.StarEffect=t,__reflect(t.prototype,"planetJump.StarEffect")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t,n){e.prototype.init.call(this,t,n);var r=this;n.trail.trailScale=.8,n.addInvincibleTime(r.cfg.invincibleTime)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this);var t=this;t.player.trail&&(t.player.trail.trailScale=t.player.trail.initTrailScale)},t}(e.PropEffect);e.ThunderboltEffect=t,__reflect(t.prototype,"planetJump.ThunderboltEffect")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){var n=this;e.prototype.init.call(this,t),n.initCollider(50)},t}(e.CircleMotionCircle);e.ObCircle=t,__reflect(t.prototype,"planetJump.ObCircle")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var n=t.call(this,e.ItemDefine.ObCircle)||this,r=n,o=e.GameCfg.getCfg().Items[r.key];return r.spawnInterval=o.spawnInterval,n}return __extends(n,t),n.prototype.spawn=function(){var t=this;if(t.canSpawnOb()){var n=e.GameCfg.getCfg().Items[t.key],r=Math.random()*Math.PI*2,o=n.spawnRange[0]+Math.random()*(n.spawnRange[1]-n.spawnRange[0]);o|=0;var a=n.scaleRange[0]+Math.random()*(n.scaleRange[1]-n.scaleRange[0]),i=e.ItemMgr.getInstance().spawnItem(e.ItemDefine.ObCircle,r,o,a),s=n.speedRange[0]+Math.random()*(n.speedRange[1]-n.speedRange[0]);i.init(s),e.World.instance.addItem(i.displayObject)}},n}(e.ItemSpawner);e.ObCircleSpawner=t,__reflect(t.prototype,"planetJump.ObCircleSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.onCreate=function(){t.prototype.onCreate.call(this);var n=this;n.key=e.ItemDefine.ObSquare_new},n.prototype.initVertices=function(){var e=this;e.vertices=[];var t=e.getChild("p0").asCom,n=e.getChild("p1").asCom,r=e.getChild("p2").asCom,o=e.getChild("p3").asCom,a=e.getChild("p4").asCom,i=e.getChild("p5").asCom;e.vertices.push(new g2.Vector2(t.x,t.y)),e.vertices.push(new g2.Vector2(n.x,n.y)),e.vertices.push(new g2.Vector2(r.x,r.y)),e.vertices.push(new g2.Vector2(o.x,o.y)),e.vertices.push(new g2.Vector2(a.x,a.y)),e.vertices.push(new g2.Vector2(i.x,i.y))},n}(e.ObSquare);e.ObSquare_new=t,__reflect(t.prototype,"planetJump.ObSquare_new")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.curColor=5939,e.bgs=[],e.curBgIdx=0,e}return __extends(n,t),n.getInstance=function(){return n.instance||new n},n.prototype.onCreate=function(){var t=this;n.instance=t,t.curColor=parseInt(e.GameCfg.getCfg().BgColors[0]),t.once(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),utils.EventDispatcher.getInstance().addEventListener("levelUp",t.onChangeBgColor,t),utils.EventDispatcher.getInstance().addEventListener("showPlusEff",t.onChangeBgColor,t)},n.prototype.onDestroy=function(){var e=this;e.bgs=null,n.instance=null,utils.EventDispatcher.getInstance().removeEventListener("levelUp",e.onChangeBgColor,e),utils.EventDispatcher.getInstance().removeEventListener("showPlusEff",e.onChangeBgColor,e)},n.prototype.onEnterFrame=function(e){},n.prototype.onAddToStage=function(e){var t=this;t.width=t.stage.stageWidth,t.height=t.stage.stageHeight;var n=new egret.Sprite;n.width=t.width,n.height=t.height,t.addChild(n),t.bgs.push(n);var r=new egret.Sprite;r.width=t.width,r.height=t.height,t.addChild(r),t.bgs.push(r),t.setStartColor(t.curColor)},n.prototype.setStartColor=function(e){var t=this,n=t.getCurBgSprite();n.graphics.clear(),n.graphics.beginFill(e),n.graphics.drawRect(0,0,n.width,n.height),n.graphics.endFill()},n.prototype.changeColor=function(e){var t=this,n=t.getCurBgSprite();egret.Tween.get(n).to({alpha:0},1e3,egret.Ease.sineInOut);var r=t.getNextBgSprite();r.graphics.clear(),r.graphics.beginFill(e),r.graphics.drawRect(0,0,r.width,r.height),r.graphics.endFill(),t.addChildAt(r,1),egret.Tween.get(r).set({alpha:0}).to({alpha:1},1e3,egret.Ease.sineInOut),t.curColor=e,utils.EventDispatcher.getInstance().dispatchEvent("changeBgColor",e)},n.prototype.getCurBgSprite=function(){var e=this;return e.bgs[e.curBgIdx]||null},n.prototype.getNextBgSprite=function(){var e=this;return e.curBgIdx++,e.curBgIdx>e.bgs.length-1&&(e.curBgIdx=0),e.bgs[e.curBgIdx]||null},n.prototype.onChangeBgColor=function(e){var t=this,n=t.getRandomColor16ByHSV([0,360],[46,90],[0,45]);t.changeColor(n)},n.prototype.getRandomColor16ByHSL=function(e,t,n){void 0===e&&(e=[0,1]),void 0===t&&(t=[0,1]),void 0===n&&(n=[0,1]);var r=this,o=e[0]+Math.random()*e[1],a=t[0]+Math.random()*t[1];50>a&&(a=0);for(var i=n[0]+Math.random()*n[1],s=r.hsl2rgb(o,a,i),l="0x",p=0;p<s.length;p++){var u=s[p].toString(16);u.length<=1&&(u="0"+u),l+=u}return parseInt(l)},n.prototype.getRandomColor16ByHSV=function(e,t,n){void 0===e&&(e=[0,360]),void 0===t&&(t=[0,100]),void 0===n&&(n=[0,100]);for(var r=this,o=e[0]+Math.random()*e[1],a=t[0]+Math.random()*t[1],i=n[0]+Math.random()*n[1],s=r.hsv2rgb(o,a,i),l="0x",p=0;p<s.length;p++){var u=s[p].toString(16);u.length<=1&&(u="0"+u),l+=u}return parseInt(l)},n.prototype.hsv2rgb=function(e,t,n){t/=100,n/=100;var r,o,a,i=(e/60|0)%6,s=e/60-i,l=n*(1-t),p=n*(1-s*t),u=n*(1-(1-s)*t);switch(i){case 0:r=n,o=u,a=l;break;case 1:r=p,o=n,a=l;break;case 2:r=l,o=n,a=u;break;case 3:r=l,o=p,a=n;break;case 4:r=u,o=l,a=n;break;case 5:r=n,o=l,a=p}return[255*r|0,255*o|0,255*a|0]},n.prototype.hsl2rgb=function(e,t,n){var r,o,a;if(0==t)r=o=a=n;else{var i=function(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e},s=.5>n?n*(1+t):n+t-n*t,l=2*n-s;r=i(l,s,e+1/3),o=i(l,s,e),a=i(l,s,e-1/3)}return[255*r|0,255*o|0,255*a|0]},n.instance=null,n}(egret.Sprite);e.Background=t,__reflect(t.prototype,"planetJump.Background",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var n=t.call(this,e.ItemDefine.ObSquare_new)||this,r=n,o=e.GameCfg.getCfg().Items[r.key];return r.spawnInterval=o.spawnInterval,n}return __extends(n,t),n.prototype.spawn=function(){var t=this;if(t.canSpawnOb()){var n=e.GameCfg.getCfg().Items[t.key],r=Math.random()*Math.PI*2,o=n.spawnRange[0]+Math.random()*(n.spawnRange[1]-n.spawnRange[0]);o|=0;var a=n.scaleRange[0]+Math.random()*(n.scaleRange[1]-n.scaleRange[0]),i=e.ItemMgr.getInstance().spawnItem(e.ItemDefine.ObSquare_new,r,o,a),s=n.speedRange[0]+Math.random()*(n.speedRange[1]-n.speedRange[0]);i.init(s),e.World.instance.addItem(i.displayObject)}},n}(e.ItemSpawner);e.ObSquareSpawner=t,__reflect(t.prototype,"planetJump.ObSquareSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.initVertices=function(){var e=this;e.vertices=[];var t=e.getChild("p0").asCom,n=e.getChild("p1").asCom,r=e.getChild("p2").asCom,o=e.getChild("p3").asCom,a=e.getChild("p4").asCom;e.vertices.push(new g2.Vector2(t.x,t.y)),e.vertices.push(new g2.Vector2(n.x,n.y)),e.vertices.push(new g2.Vector2(r.x,r.y)),e.vertices.push(new g2.Vector2(o.x,o.y)),e.vertices.push(new g2.Vector2(a.x,a.y))},n.prototype.collisionEffect=function(){var t=this;e.World.instance.spawnUIAni(e.CollisionBlackAni,t.x,t.y)},n}(e.LinearMotionPolygon);e.ObTriangle=t,__reflect(t.prototype,"planetJump.ObTriangle")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var n=t.call(this,e.ItemDefine.ObTriangle)||this,r=n,o=e.GameCfg.getCfg().Items[r.key];return r.spawnInterval=o.spawnInterval,n}return __extends(n,t),n.prototype.spawn=function(){var t=this;if(t.canSpawnOb())for(var n=e.GameCfg.getCfg().Items[t.key],r=0;10>r;r++){var o=r*Math.PI/5,a=e.ItemMgr.getInstance().spawnItem(t.key,o,10);a.init(n.speed),e.World.instance.addItem(a.displayObject)}},n}(e.ItemSpawner);e.ObTriangleSpawner=t,__reflect(t.prototype,"planetJump.ObTriangleSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.constructFromResource=function(){e.prototype.constructFromResource.call(this);var t=this;t.c1=t.getController("c1");var n=t.c1.pageCount*Math.random()|0;t.c1.setSelectedIndex(n)},t.prototype.init=function(t){e.prototype.init.call(this,t);var n=this,r=n.cfg.selfRotateSpeedRange[0]+Math.random()*(n.cfg.selfRotateSpeedRange[1]-n.cfg.selfRotateSpeedRange[0]);n.selfRotateSpeed=parseFloat(r.toFixed(1))},t.prototype.initVertices=function(){var e=this;e.vertices=[];var t=e.getChild("p0").asCom,n=e.getChild("p1").asCom,r=e.getChild("p2").asCom,o=e.getChild("p3").asCom;e.vertices.push(new g2.Vector2(t.x,t.y)),e.vertices.push(new g2.Vector2(n.x,n.y)),e.vertices.push(new g2.Vector2(r.x,r.y)),e.vertices.push(new g2.Vector2(o.x,o.y))},t.prototype.updateTransform=function(){var e=this;e.collider&&(e.collider.x=e.x,e.collider.y=e.y,e.collider.scaleX=e.scaleX,e.collider.scaleY=e.scaleY,e.rotation+=e.selfRotateSpeed,e.collider.rotation=e.rotation)},t}(e.CircleMotionSquare);e.ObTube=t,__reflect(t.prototype,"planetJump.ObTube")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var n=t.call(this,e.ItemDefine.ObTube)||this,r=n,o=e.GameCfg.getCfg().Items[r.key];return r.spawnInterval=o.spawnInterval,n}return __extends(n,t),n.prototype.spawn=function(){var t=this;if(t.canSpawnOb()){var n=e.GameCfg.getCfg().Items[t.key],r=Math.random()*Math.PI*2,o=n.spawnRange[0]+Math.random()*(n.spawnRange[1]-n.spawnRange[0]);o|=0;var a=n.scaleRange[0]+Math.random()*(n.scaleRange[1]-n.scaleRange[0]),i=e.ItemMgr.getInstance().spawnItem(e.ItemDefine.ObTube,r,o,a),s=n.speedRange[0]+Math.random()*(n.speedRange[1]-n.speedRange[0]);i.init(s),e.World.instance.addItem(i.displayObject)}},n}(e.ItemSpawner);e.ObTubeSpawner=t,__reflect(t.prototype,"planetJump.ObTubeSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.applyEffect=function(n){var r=this;t.prototype.applyEffect.call(this,n),n.addEffect(r.key,e.CutEffect),utils.Singleton.get(utils.SoundMgr).playSound("thunderbolt_mp3")},n}(e.Prop);e.Cut=t,__reflect(t.prototype,"planetJump.Cut")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return t.call(this,e.ItemDefine.Cut)||this}return __extends(n,t),n}(e.PropSpawner);e.CutSpawner=t,__reflect(t.prototype,"planetJump.CutSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.applyEffect=function(n){var r=this;t.prototype.applyEffect.call(this,n);for(var o=r.cfg,a=e.GameCfg.getCfg().Items[e.ItemDefine.ExplodeSpike],i=0;i<o.bulletNum;i++){var s=i*Math.PI/(o.bulletNum/2),l=e.ItemMgr.getInstance().spawnItem(e.ItemDefine.ExplodeSpike,s,10,.8);l.rootX=r.x,l.rootY=r.y,l.init(a.speed),e.World.instance.addItem(l.displayObject)}utils.Singleton.get(utils.SoundMgr).playSound("WhooshesImpacts_Impact_64_edited_mp3")},n.prototype.collisionEffect=function(){var t=this;e.World.instance.spawnUIAni(e.ExplodeAni,t.x,t.y)},n}(e.Prop);e.Explode=t,__reflect(t.prototype,"planetJump.Explode")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return t.call(this,e.ItemDefine.Explode)||this}return __extends(n,t),n}(e.PropSpawner);e.ExplodeSpawner=t,__reflect(t.prototype,"planetJump.ExplodeSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.onAddToStage=function(e){var n=this;t.prototype.onAddToStage.call(this,e),n.x+=n.rootX,n.y+=n.rootY;var r=Math.atan((n.y-n.rootY)/(n.x-n.rootX));n.speedX=n.speed*Math.cos(r),n.speedX*=n.x-n.rootX<0?-1:1,n.speedX=parseFloat(n.speedX.toFixed(1)),n.speedY=n.speed*Math.sin(r),n.speedY*=n.x-n.rootX<0?-1:1,n.speedY=parseFloat(n.speedY.toFixed(1)),n.rotation=n.getAngle()-270,n.collider.rotation=n.rotation},n.prototype.getAngle=function(){var e=this,t=e.x-e.rootX,n=e.y-e.rootY;
return utils.getAngle(t,n)},n.prototype.initVertices=function(){var e=this,t=e.getChild("p0").asCom,n=e.getChild("p1").asCom,r=e.getChild("p2").asCom,o=e.getChild("p3").asCom,a=e.getChild("p4").asCom;e.vertices=[],e.vertices.push(new g2.Vector2(t.x,t.y)),e.vertices.push(new g2.Vector2(n.x,n.y)),e.vertices.push(new g2.Vector2(r.x,r.y)),e.vertices.push(new g2.Vector2(o.x,o.y)),e.vertices.push(new g2.Vector2(a.x,a.y))},n.prototype.updateTransform=function(){var e=this;e.collider&&(e.collider.x=e.x,e.collider.y=e.y)},n.prototype.onMove=function(n){t.prototype.onMove.call(this,n),e.ItemMgr.getInstance().bulletCollisionCheck(this)},n}(e.LinearMotionPolygon);e.ExplodeSpike=t,__reflect(t.prototype,"planetJump.ExplodeSpike")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.applyEffect=function(n){var r=this;t.prototype.applyEffect.call(this,n),n.addEffect(r.key,e.MagnetEffect),utils.Singleton.get(utils.SoundMgr).playSound("gravityeffect2_mp3"),e.GameMgr.getInstance().recordClip([1,(r.cfg.duration/1e3|0)+1])},n}(e.Prop);e.Magnet=t,__reflect(t.prototype,"planetJump.Magnet")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return t.call(this,e.ItemDefine.Magnet)||this}return __extends(n,t),n}(e.PropSpawner);e.MagnetSpawner=t,__reflect(t.prototype,"planetJump.MagnetSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.applyEffect=function(e){var t=this;e.jump(t.cfg.jumpSpeed),utils.Singleton.get(utils.SoundMgr).playSound("retro_jump_collect_bonus_03_mp3")},t}(e.Prop);e.MegaJump=t,__reflect(t.prototype,"planetJump.MegaJump")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return t.call(this,e.ItemDefine.MegaJump)||this}return __extends(n,t),n}(e.PropSpawner);e.MegaJumpSpawner=t,__reflect(t.prototype,"planetJump.MegaJumpSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.applyEffect=function(n){var r=this;t.prototype.applyEffect.call(this,n),n.addEffect(r.key,e.PlusEffect),utils.Singleton.get(utils.SoundMgr).playSound("Increase_chord_1_edited_mp3"),e.GameMgr.getInstance().recordClip([1,(r.cfg.duration/1e3|0)+1])},n}(e.Prop);e.Plus=t,__reflect(t.prototype,"planetJump.Plus")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return t.call(this,e.ItemDefine.Plus)||this}return __extends(n,t),n}(e.PropSpawner);e.PlusSpawner=t,__reflect(t.prototype,"planetJump.PlusSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(){function e(){this.adCfg={"结算界面banner":"cnsg3amqimd5s0mmv1","暂停界面banner":"7u2ld3cvld71bnd459","帮助界面banner":"fhi16oeh73f374acoc","设置界面banner":"aj6kika1id4im8frpn","复活广告":"3n38ru34bohlac9ga6"}}return e.prototype.onCreate=function(){var e=this;if(platform.isRunInTT()){var t=tt.getSystemInfoSync();e.sysInfo=t,e.screenWidth=t.screenWidth,e.screenHeight=t.screenHeight}},e.prototype.onDestroy=function(){},e.prototype.showBannerAd=function(e){var t=this;if(platform.isRunInTT()){var n=t.adCfg[e];if(n){var r=200,o={adUnitId:n,style:{width:r,left:.5*(t.screenWidth-r),top:t.screenHeight+r/16*9}};t.bannerComp&&t.bannerComp.destroy(),t.bannerComp=platform.createBannerAd(o),t.bannerComp.onLoad(function(){t.bannerComp.show()}),t.bannerComp.onError(function(e){return console.log(e)}),t.bannerComp.onResize(function(e){t.bannerComp.style.top=t.screenHeight-e.height,t.bannerComp.style.left=(t.screenWidth-e.width)/2})}}},e.prototype.hideBanner=function(){var e=this;e.bannerComp&&e.bannerComp.hide()},e.prototype.watchVideoAd=function(t,n,r){var o=this;e.watchVideoEnd=n,e.watchVideoFail=r;var a=o.adCfg[t];return a?(o.videoAdComp&&(o.videoAdComp.offError(o.onVideoError),o.videoAdComp.offClose(o.onVideoClosed)),o.videoAdComp=platform.createVideoAd(a),o.videoAdComp.load().then(function(){return o.videoAdComp.show()})["catch"](function(e){console.log(e.errMsg),r()}),o.videoAdComp.onError(o.onVideoError),void o.videoAdComp.onClose(o.onVideoClosed)):r()},e.prototype.onVideoError=function(t){console.log("视频观看错误：",t),e.watchVideoFail&&e.watchVideoFail()},e.prototype.onVideoClosed=function(t){console.log("视频观看结束：",t),t&&t.isEnded||void 0===t?e.watchVideoEnd&&e.watchVideoEnd(!0):e.watchVideoEnd&&e.watchVideoEnd(!1),e.watchVideoEnd=null},e.prototype.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var r=0;n>r;r++){var o=parseInt(e[r]),a=parseInt(t[r]);if(o>a)return 1;if(a>o)return-1}return 0},e}();e.AdMgr=t,__reflect(t.prototype,"planetJump.AdMgr",["utils.ISingleton"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lineLen=0,t}return __extends(t,e),t.prototype.onCreate=function(){var e=this;e.once(egret.Event.ADDED_TO_STAGE,e.onAdded,e),utils.EventDispatcher.getInstance().addEventListener("newRound",e.onNewRound,e),utils.EventDispatcher.getInstance().addEventListener("nearEnd",e.onNearEnd,e)},t.prototype.onDestroy=function(){var e=this;utils.EventDispatcher.getInstance().removeEventListener("newRound",e.onNewRound,e),utils.EventDispatcher.getInstance().removeEventListener("nearEnd",e.onNearEnd,e)},t.prototype.onEnterFrame=function(e){var t=this;t.isNear&&t.updateLine()},t.prototype.onAdded=function(e){var t=this;t.touchEnabled=!1,t.touchChildren=!1,t.line=fairygui.UIPackage.createObject("leap","EndLineUI"),t.line.touchable=!1,t.line.width=8,t.line.pivotX=.5,t.line.rotation=180,t.addChild(t.line.displayObject)},t.prototype.updateLine=function(){var e=this,t=e.globalToLocal(0,0),n=Math.abs(t.y);n<=e.lineLen||(e.lineLen=n,e.line.height=n)},t.prototype.onNewRound=function(e){var t=this;1>=e||(utils.Singleton.get(utils.SoundMgr).playSound("multiplier2_mp3"),egret.Tween.removeTweens(t.line),egret.Tween.get(t.line).to({scaleX:12,alpha:1},300,egret.Ease.sineIn).to({scaleX:24,alpha:0},700,egret.Ease.sineOut).set({visible:!1}).call(function(){t.isNear=!1}))},t.prototype.onNearEnd=function(){var e=this;e.isNear||(e.isNear=!0,egret.Tween.get(e.line,{loop:!0}).set({scaleX:1,visible:!0}).to({alpha:1},800,egret.Ease.sineInOut).to({alpha:.1},800,egret.Ease.sineInOut))},t}(egret.Sprite);e.EndLine=t,__reflect(t.prototype,"planetJump.EndLine",["utils.IGameObject"])}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this);var e=this;e.c1=e.getController("c1");var n=e.c1.pageCount*Math.random()|0;e.c1.setSelectedIndex(n)},n.prototype.onCreate=function(){t.prototype.onCreate.call(this);var n=this;n.key=e.ItemDefine.ScoreBall_new},n.prototype.applyEffect=function(t){var n=this;n.addScore();var r=e.GameCfg.getCfg().Items[n.key];t.jump(r.jumpSpeed),utils.Singleton.get(utils.SoundMgr).playSound("power_1_b_edited_mp3")},n}(e.LinearMotionCircle);e.ScoreBall_new=t,__reflect(t.prototype,"planetJump.ScoreBall_new")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this);var e=this;e.colorImg=e.getChild("colorImg").asImage},n.prototype.onAddToStage=function(n){var r=this;t.prototype.onAddToStage.call(this,n),r.colorImg.color=e.Background.getInstance().curColor,utils.EventDispatcher.getInstance().addEventListener("changeBgColor",r.changeBgColor,r)},n.prototype.changeBgColor=function(e){var t=this;t.colorImg.color=e},n.prototype.applyEffect=function(e){var t=this;t.addScore(),e.jump(t.cfg.jumpSpeed),utils.Singleton.get(utils.SoundMgr).playSound("power_1_b_edited_mp3")},n}(e.LinearMotionCircle);e.ScoreBall=t,__reflect(t.prototype,"planetJump.ScoreBall")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var n=t.call(this,e.ItemDefine.ScoreBall_new)||this;n.spawnInterval=1500;var r=n,o=e.GameCfg.getCfg().Items[r.key];return r.spawnInterval=o.spawnInterval,n}return __extends(n,t),n.prototype.spawn=function(){var t=this,n=e.GameCfg.getCfg().Items[t.key],r=Math.random()*Math.PI*2,o=n.spawnRange[0]+Math.random()*(n.spawnRange[1]-n.spawnRange[0]);o|=0;var a=n.scaleRange[0]+Math.random()*(n.scaleRange[1]-n.scaleRange[0]),i=e.ItemMgr.getInstance().spawnItem(t.key,r,o,a),s=n.speedRange[0]+Math.random()*(n.speedRange[1]-n.speedRange[0]);s*=Math.random()<.5?-1:1,i.init(s),e.World.instance.addItem(i.displayObject)},n}(e.ItemSpawner);e.ScoreBallSpawner=t,__reflect(t.prototype,"planetJump.ScoreBallSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.applyEffect=function(n){var r=this;t.prototype.applyEffect.call(this,n),n.addEffect(r.key,e.StarEffect),utils.Singleton.get(utils.SoundMgr).playSound("star_sound_final_mp3"),e.GameMgr.getInstance().recordClip([1,(r.cfg.duration/1e3|0)+1])},n}(e.Prop);e.Star=t,__reflect(t.prototype,"planetJump.Star")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return t.call(this,e.ItemDefine.Star)||this}return __extends(n,t),n}(e.PropSpawner);e.StarSpawner=t,__reflect(t.prototype,"planetJump.StarSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.applyEffect=function(n){var r=this;t.prototype.applyEffect.call(this,n),n.addEffect(r.key,e.ThunderboltEffect),utils.Singleton.get(utils.SoundMgr).playSound("thunderbolt_mp3")},n}(e.Prop);e.Thunderbolt=t,__reflect(t.prototype,"planetJump.Thunderbolt")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return t.call(this,e.ItemDefine.Thunderbolt)||this}return __extends(n,t),n}(e.PropSpawner);e.ThunderboltSpawner=t,__reflect(t.prototype,"planetJump.ThunderboltSpawner")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this);var e=this;e.c1=e.getController("c1");var n=e.c1.pageCount*Math.random()|0;e.c1.setSelectedIndex(n)},n.prototype.onCreate=function(){t.prototype.onCreate.call(this);var n=this;n.key=e.ItemDefine.WhiteBall},n.prototype.applyEffect=function(e){var t=this;t.addScore(),e.jump(t.cfg.jumpSpeed),utils.Singleton.get(utils.SoundMgr).playSound("power_1_b_edited_mp3")},n}(e.LinearMotionCircle);e.WhiteBall=t,__reflect(t.prototype,"planetJump.WhiteBall")}(planetJump||(planetJump={}));var planetJump;!function(e){var t=function(t){function n(){var n=t.call(this,e.ItemDefine.WhiteBall)||this;n.spawnInterval=1e3;var r=n,o=e.GameCfg.getCfg().Items[r.key];return r.spawnInterval=o.spawnInterval,n}return __extends(n,t),n.prototype.spawn=function(){var t=this,n=e.GameCfg.getCfg().Items[t.key],r=Math.random()*Math.PI*2,o=n.spawnRange[0]+Math.random()*(n.spawnRange[1]-n.spawnRange[0]);o|=0;var a=n.scaleRange[0]+Math.random()*(n.scaleRange[1]-n.scaleRange[0]),i=e.ItemMgr.getInstance().spawnItem(t.key,r,o,a),s=n.speedRange[0]+Math.random()*(n.speedRange[1]-n.speedRange[0]);s*=Math.random()<.5?-1:1,i.init(s),e.World.instance.addItem(i.displayObject)},n}(e.ItemSpawner);e.WhiteBallSpawner=t,__reflect(t.prototype,"planetJump.WhiteBallSpawner")}(planetJump||(planetJump={}));var utils;!function(e){var t=function(){function e(){this.listeners={}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.addEventListener=function(e,t,n,r){var o=this,a=o._addEventListener(e,t,n,r);o.listeners[e].push(a)},e.prototype.once=function(e,t,n,r){var o=this,a=o._addEventListener(e,t,n,r,!0);o.listeners[e].push(a)},e.prototype._addEventListener=function(e,t,n,r,o){void 0===o&&(o=!1);var a=this;a.listeners||(a.listeners={}),a.listeners[e]||(a.listeners[e]=[]);var i={};return i.listener=t,i.thisObj=n,i.refObj=r,i.once=o,i},e.prototype.removeEventListener=function(e,t,n){var r=this;if(r.listeners[e]&&r.listeners[e].length){for(var o=r.listeners[e],a=0;a<o.length;a++){var i=o[a];i.listener==t&&i.thisObj==n&&o.splice(a--,1)}o.length||delete r.listeners[e]}},e.prototype.removeAllEventListener=function(e){var t=this;t.listeners[e]&&(t.listeners[e]=null,delete t.listeners[e])},e.prototype.removeAll=function(){var e=this;e.listeners={}},e.prototype.dispatchEvent=function(e,t,n){var r=this;if(r.listeners[e]&&r.listeners[e].length){for(var o=r.listeners[e],a=0;a<o.length;a++){var i=o[a];n&&n!=i.refObj||(i.once&&o.splice(a--,1),i.listener.call(i.thisObj,t))}o.length||delete r.listeners[e]}},e.prototype.dispose=function(){var t=this;t.listeners=null,e.instance=null,console.log("EventDispatcher释放")},e}();e.EventDispatcher=t,__reflect(t.prototype,"utils.EventDispatcher")}(utils||(utils={}));var utils;!function(e){e.grayFilters=function(){var e=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],t=new egret.ColorMatrixFilter(e);return[t]},e.getAngle=function(e,t){var n=Math.atan(t/e),r=n/Math.PI*180;return 0>e?r=180+r:0>t&&(r=360+r),parseFloat(r.toFixed(2))}}(utils||(utils={}));var utils;!function(e){var t=function(){function e(){this.pause=!1;var e=this;e.pool={},e.list=[],egret.MainContext.instance.stage.addEventListener(egret.Event.ENTER_FRAME,e.onEnterFrame,e)}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.onEnterFrame=function(){var e=this;if(!e.pause)for(var t=e.list.concat(),n=0,r=t.length;r>n;n++){var o=t[n];o.onEnterFrame(16)}},e.prototype.createObject=function(e){var t,n=this,r=egret.getQualifiedClassName(e);r=r.split(".")[1];var o=n.pool[r];return null!=o&&o.length?t=o.shift():(t=new e,t.key=r),t.onCreate(),n.list.push(t),t},e.prototype.createFairyUIObject=function(e,t){var n,r=this,o=egret.getQualifiedClassName(e);o=o.split(".")[1];var a=r.pool[o];return null!=a&&a.length?n=a.shift():(n=fairygui.UIPackage.createObject(t,o,e),n.key=o),n.onCreate(),r.list.push(n),n},e.prototype.destroyObject=function(e){var t=this;e.onDestroy();var n=e.key;null==t.pool[n]&&(t.pool[n]=[]),t.pool[n].push(e);var r=e.parent;r&&r.removeChild(e);var o=t.list.indexOf(e);-1!=o&&t.list.splice(o,1)},e.prototype.dispose=function(){var t=this;egret.MainContext.instance.stage.removeEventListener(egret.Event.ENTER_FRAME,t.onEnterFrame,t);for(var n=0;n<t.list.length;n++){var r=t.list[n];r.onDestroy();var o=r.parent;o?o.removeChild(r):r.displayObject&&r.displayObject.parent&&(o=r.displayObject.parent,o.removeChild(r.displayObject))}t.list=null,t.pool=null,e.instance=null,console.log("ObjectPool释放")},e}();e.ObjectPool=t,__reflect(t.prototype,"utils.ObjectPool")}(utils||(utils={}));var utils;!function(e){var t=function(){function e(){}return e.get=function(e){var t=e;return t.instance||(t.instance=new t,t.instance.onCreate&&t.instance.onCreate()),t.instance},e.destroy=function(t){var n=e.get(t);n.onDestroy&&n.onDestroy(),t.instance=null},e}();e.Singleton=t,__reflect(t.prototype,"utils.Singleton")}(utils||(utils={}));var utils;!function(e){var t=function(){function e(){this.lastBgmPos=0,this.bgmLoops=0,this.isMuteBgm=!1,this.isMuteSound=!1}return e.prototype.onCreate=function(){var e=this;e.sounds={};var t=egret.localStorage.getItem("isMuteBgm");e.isMuteBgm=t&&"1"==t;var n=egret.localStorage.getItem("isMuteSound");e.isMuteSound=n&&"1"==n},e.prototype.onDestroy=function(){var e=this;e.disposeBgm(),e.disposeAllSound(),console.log("SoundMgr释放")},e.prototype.preloadBgm=function(e){var t=this;t.bgm||(t.bgm=RES.getRes(e))},e.prototype.playBgm=function(e,t,n,r,o){void 0===t&&(t=!1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=1);var a=this;a.bgmSoundChannel&&a.bgmSoundChannel.stop(),a.preloadBgm(e),a.bgmLoops=r,a.isMuteBgm||(n=t?0:n||a.lastBgmPos,a.bgmSoundChannel=a.bgm.play(n,r),a.bgmSoundChannel.volume=o)},e.prototype.pauseBgm=function(){var e=this;e.bgmSoundChannel&&(e.lastBgmPos=e.bgmSoundChannel.position,e.bgmSoundChannel.stop())},e.prototype.resumeBgm=function(){var e=this;e.isMuteBgm||e.bgm&&(e.bgmSoundChannel=e.bgm.play(e.lastBgmPos,e.bgmLoops))},e.prototype.disposeBgm=function(){var e=this;e.bgmSoundChannel.stop(),e.bgmSoundChannel=null,e.bgm.close(),e.bgm=null},e.prototype.setBgmMute=function(e){var t=this;t.isMuteBgm!=e&&(t.isMuteBgm=e,e?t.pauseBgm():t.resumeBgm(),egret.localStorage.setItem("isMuteBgm",e?"1":"0"))},e.prototype.playSound=function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=1);var o=this;if(!o.isMuteSound){var a,i=o.sounds[e];i?a=i.sound:(a=RES.getRes(e),o.sounds[e]={sound:a}),o.sounds[e].loops=n;var s=a.play(t,n);s.volume=r,o.sounds[e].channel=s}},e.prototype.pauseSound=function(e){var t=this,n=t.sounds[e];n&&n.channel.stop()},e.prototype.pauseAllSound=function(){var e=this;for(var t in e.sounds){var n=e.sounds[t],r=n.channel;n.lastSoundPos=r.position,r.stop()}},e.prototype.resumeSound=function(e){var t=this,n=t.sounds[e];if(n){n.channel;n.channel=n.sound.play(n.lastSoundPos,n.loops)}},e.prototype.setSoundMute=function(e){var t=this;t.isMuteSound!=e&&(e&&t.pauseAllSound(),t.isMuteSound=e,egret.localStorage.setItem("isMuteSound",e?"1":"0"))},e.prototype.disposeSound=function(e){var t=this,n=t.sounds[e];if(n){var r=n.sound;r.close();var o=n.channel;o.stop(),t.sounds[e]=null,delete t.sounds[e]}},e.prototype.disposeAllSound=function(){var e=this;for(var t in e.sounds)e.disposeSound(t);e.sounds=null},e}();e.SoundMgr=t,__reflect(t.prototype,"utils.SoundMgr",["utils.ISingleton"])}(utils||(utils={}));var utils;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"stage",{get:function(){return egret.MainContext.instance.stage},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stageWidth",{get:function(){return egret.MainContext.instance.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stageHeight",{get:function(){return egret.MainContext.instance.stage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e,"halfStageWidth",{get:function(){return.5*egret.MainContext.instance.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"halfStageHeight",{get:function(){return.5*egret.MainContext.instance.stage.stageHeight},enumerable:!0,configurable:!0}),e.dispatchEvent=function(t,n,r,o){e.stage.dispatchEventWith(t,n,r,o)},e.addEventListener=function(t,n,r){e.stage.addEventListener(t,n,r)},e.removeEventListener=function(t,n,r){e.stage.removeEventListener(t,n,r)},e}();e.StageUtils=t,__reflect(t.prototype,"utils.StageUtils")}(utils||(utils={}));